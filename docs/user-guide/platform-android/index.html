<!DOCTYPE html><html lang=en><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-60112109-3"></script><script>window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments);}gtag('js',new Date());gtag('config','UA-60112109-3');</script><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="Documentation and customization guides for the Pegasus frontend."><meta name=author content="M치ty치s Mustoha"><link rel=canonical href=http://www.pegasus-frontend.org/docs/user-guide/platform-android/ ><link rel="shortcut icon" href=../../img/favicon.ico><title>Android - Pegasus Docs</title><link rel=stylesheet href=https://use.fontawesome.com/releases/v5.12.0/css/all.css><link rel=stylesheet href=https://use.fontawesome.com/releases/v5.12.0/css/v4-shims.css><link rel=stylesheet href=//cdn.jsdelivr.net/npm/hack-font@3.3.0/build/web/hack.min.css><link href="//fonts.googleapis.com/css?family=PT+Sans:400,400italic,700,700italic&subset=latin-ext,latin" rel=stylesheet><link href="//fonts.googleapis.com/css?family=Open+Sans:300italic,400italic,700italic,400,300,600,700&subset=latin-ext,latin" rel=stylesheet><link href=../../css/bootstrap-custom.min.css rel=stylesheet><link href=../../css/base.min.css rel=stylesheet><link href=../../css/cinder.min.css rel=stylesheet><link href=../../css/extra.css rel=stylesheet><link href=../../css/codehl.css rel=stylesheet><link href="//fonts.googleapis.com/icon?family=Material+Icons" rel=stylesheet><!--[if lt IE 9]>
            <script src="https://cdn.jsdelivr.net/npm/html5shiv@3.7.3/dist/html5shiv.min.js"></script>
            <script src="https://cdn.jsdelivr.net/npm/respond.js@1.4.2/dest/respond.min.js"></script>
        <![endif]--></head><body><div class="navbar navbar-default navbar-fixed-top" role=navigation><div class=container><div class=navbar-header><button type=button class=navbar-toggle data-toggle=collapse data-target=.navbar-collapse><span class=sr-only>Toggle navigation</span> <span class=icon-bar></span> <span class=icon-bar></span> <span class=icon-bar></span></button> <a class=navbar-brand href=../..>Pegasus Docs</a></div><div class="navbar-collapse collapse"><ul class="nav navbar-nav"><li><a href=../..>Home</a></li><li class="dropdown active"><a href=# class=dropdown-toggle data-toggle=dropdown>User Guide <b class=caret></b></a><ul class=dropdown-menu><li><a href=../getting-started/ >Getting started</a></li><li><a href=../controls/ >Default controls</a></li><li><a href=../portable/ >Portable mode</a></li><li class=dropdown-submenu><a tabindex=-1 href="">Platform Notes</a><ul class=dropdown-menu><li><a href=../platform-windows/ >Windows</a></li><li class=active><a href=./ >Android</a></li><li><a href=../platform-android-example/ >Android example</a></li><li><a href=../platform-linux/ >Linux</a></li><li><a href=../platform-retropie/ >RetroPie</a></li></ul></li><li class=dropdown-submenu><a tabindex=-1 href="">Game files</a><ul class=dropdown-menu><li><a href=../meta-files/ >Metadata files</a></li><li><a href=../meta-assets/ >Asset files</a></li><li><a href=../meta-sources/ >Other sources</a></li></ul></li><li><a href=../installing-themes/ >Installing themes</a></li><li><a href=../config-dirs/ >Config directories</a></li><li><a href=../scripting/ >Scripting</a></li><li><a href=../breaking-changes/ >Breaking changes</a></li></ul></li><li class=dropdown><a href=# class=dropdown-toggle data-toggle=dropdown>Theme Dev <b class=caret></b></a><ul class=dropdown-menu><li><a href=../../themes/overview/ >Overview</a></li><li><a href=../../themes/extra/ >Special features</a></li><li><a href=../../themes/qml-tutorials/ >QML tutorials</a></li><li><a href=../../themes/qml-modules/ >QML modules</a></li><li class=dropdown-submenu><a tabindex=-1 href="">Step-by-step: Simple theme</a><ul class=dropdown-menu><li><a href=../../themes/example-simple-intro/ >Introduction</a></li><li><a href=../../themes/example-simple-ch1/ >Part 1</a></li><li><a href=../../themes/example-simple-ch2/ >Part 2</a></li><li><a href=../../themes/example-simple-ch3/ >Part 3</a></li></ul></li><li class=dropdown-submenu><a tabindex=-1 href="">Step-by-step: Flixnet theme</a><ul class=dropdown-menu><li><a href=../../themes/example-flixnet-intro/ >Introduction</a></li><li><a href=../../themes/example-flixnet-ch1/ >Part 1</a></li><li><a href=../../themes/example-flixnet-ch2/ >Part 2</a></li><li><a href=../../themes/example-flixnet-ch3/ >Part 3</a></li><li><a href=../../themes/example-flixnet-ch4/ >Part 4</a></li><li><a href=../../themes/example-flixnet-ch5/ >Part 5</a></li></ul></li><li><a href=../../themes/api/ >API reference</a></li></ul></li><li class=dropdown><a href=# class=dropdown-toggle data-toggle=dropdown>Core Dev <b class=caret></b></a><ul class=dropdown-menu><li><a href=../../dev/translate/ >Translations</a></li><li><a href=../../dev/meta-syntax/ >Metadata syntax</a></li><li><a href=../../dev/build/ >Building</a></li><li><a href=../../dev/install-qt/ >Installing Qt</a></li><li><a href=../../dev/cross-compile-qt/ >Cross compiling Qt</a></li><li><a href=../../dev/deploy/ >Deployment</a></li></ul></li></ul><ul class="nav navbar-nav navbar-right"><li><a href=# data-toggle=modal data-target=#mkdocs_search_modal><i class="fas fa-search"></i> Search</a></li><li><a rel=prev href=../platform-windows/ ><i class="fas fa-arrow-left"></i> Previous</a></li><li><a rel=next href=../platform-android-example/ >Next <i class="fas fa-arrow-right"></i></a></li></ul></div></div></div><div class=container><div class=col-md-3><div class="bs-sidebar hidden-print affix well" role=complementary><ul class="nav bs-sidenav"><li class="first-level active"><a href=#platform-notes-android>Platform Notes: Android</a></li><li class=second-level><a href=#installation>Installation</a></li><li class=third-level><a href=#config-directory>Config directory</a></li><li class=third-level><a href=#default-launcher>Default launcher</a></li><li class=second-level><a href=#loading-games>Loading games</a></li><li class=third-level><a href=#open-a-file-with-the-default-app>Open a file with the default app</a></li><li class=third-level><a href=#open-a-file-with-a-specific-app>Open a file with a specific app</a></li><li class=third-level><a href=#run-a-custom-command>Run a custom command</a></li><li class=second-level><a href=#app-specific-notes>App-specific notes</a></li><li class=third-level><a href=#retroarch>RetroArch</a></li><li class=third-level><a href=#known-emulators>Known emulators</a></li><li class=second-level><a href=#additional-notes>Additional notes</a></li></ul></div></div><div class=col-md-9 role=main><h1 id=platform-notes-android>Platform Notes: Android</h1><p>Pegasus is available for Android devices running at least <strong>Android 5.0</strong> (Lollipop).</p><h2 id=installation>Installation</h2><p>Pegasus is released as an APK package. To install it, you'll need to enable such files, which can be done under <em>Settings &rarr; Security &rarr; Unknown Sources</em>, turned on. Then open the APK file with any file manager app.</p><p>If you have an active full screen app (eg. screen shade), Android might not allow you to press on the install button due to security reasons. In this case, just disable that app for the time of the installation.</p><h3 id=config-directory>Config directory</h3><p>Config files are stored under <code>&lt;storage&gt;/pegasus-frontend</code>, where <code>&lt;storage&gt;</code> the internal storage, if you have one, otherwise the SD card. The directory will be created automatically when you first launch Pegasus (or you can create it yourself).</p><h3 id=default-launcher>Default launcher</h3><p>Pegasus can be set as the default launcher, which will make it start automatically when the device is turned on. After installing Pegasus, when you press the home screen button a popup message should appear, asking you which launcher you would like to run. Select Pegasus (or your previous launcher) from the list to set it as the default launcher.</p><p><strong>To restore the default launcher</strong>, open the Android Settings menu, either from Pegasus or by pulling down the notification bar at the top of the screen and clicking the cogwheel icon. Depending on your device, you should find a "Default launcher" option in either under <em>Apps &rarr; Advanced settings &rarr; Default apps</em>, <em>Apps &rarr; Configure apps</em> or <em>Home</em>.</p><h2 id=loading-games>Loading games</h2><div class="admonition tip"><p class=admonition-title>Android metadata generator</p><p><a href=http://pegasus-frontend.org/tools/metagen-android/ >This online tool</a> can help with generating the launch commands for various emulators.</p></div><p>Compared to desktop systems, launching other applications is slightly different on Android. Instead of directly calling a program, you'll need to ask the Activity Manager (<code>am</code>) to open a file or start an app, optionally with additional parameters.</p><p>Here's how it looks in practice:</p><h3 id=open-a-file-with-the-default-app>Open a file with the default app</h3><p>The best case is when you have a file format associated with an app already. To open a file with its default app, invoke the Activity Manager like this:</p><p><code>am start --user 0 -a android.intent.action.VIEW -d "file://&lt;path-to-file&gt;"</code></p><p>Here is an example <code>metadata.txt</code> that will open ISO files with the default app:</p><div class=codehilite><pre><span></span><span class=nf>collection</span><span class=o>:</span> <span class=n>PSP</span>
<span class=nf>extension</span><span class=o>:</span> <span class=n>iso</span>
<span class=nf>launch</span><span class=o>:</span> <span class=n>am</span> <span class=n>start</span> --<span class=n>user</span> 0
  -a android.intent.action.VIEW
  -d <span class=s2>&quot;file://{file.path}&quot;</span>
</pre></div><div class="admonition help"><p class=admonition-title>Help</p><ul><li><code>am</code> is the Activity Manager program</li><li>the <code>start</code> command sends an app launching request ("intent") to the Activity Manager</li><li><code>--user 0</code> selects the user (by ID) that sends this request. Without this parameter I've got permission denied errors on my devices.</li><li><code>-a</code> stands for "action"; if an app supports opening files (<code>android.intent.action.VIEW</code> ie. "open with"), it will react to this action. There are other possible actions, like "take a photo" or "call a taxi", but we probably won't need them for our use.</li><li><code>-d</code> is the parameter (data) of the action, and must be in such URI format (<code>file://...</code>)</li></ul><p>The full documentation of <code>am</code> can be found <a href=https://developer.android.com/studio/command-line/adb#am>here</a> and <a href=https://developer.android.com/studio/command-line/adb#IntentSpec>here</a>.<br>If you're not familiar with Pegasus' config files, you can find their documentation <a href=../meta-files/ >here</a>.</p></div><p>Note that not every app supports opening arbitrary files, or opening files at all (for example, RetroArch). In addition, there seems to be a glitch on some systems where a file may get opened with something else when there are multiple apps that can handle the file type. Which leads to...</p><h3 id=open-a-file-with-a-specific-app>Open a file with a specific app</h3><p>Unfortunately opening a file with anything else than the default is a bit painful. To open the file, you have to know the exact name of the app component ("activity") that handles file opening requests. For example, for the Android version of the PPSSPP emulator, this is <code>org.ppsspp.ppsspp/.PpssppActivity</code>.</p><p>I haven't found a good app yet that could tell this about the installed apps, so I guess the best bet for now is either asking the developers for a particular app or looking into its source code (tip: it's always in <code>AndroidManifest.xml</code>). I've also made a small collection which you can find at the <a href=#apps-that-can-open-files>bottom of this page</a>, and a <a href=http://pegasus-frontend.org/tools/metagen-android/ ><strong>tool that can generate metadata files for you</strong></a>.</p><p>Anyway, once you know the Activity you want to call, the command is</p><p><code>am start --user 0 -a android.intent.action.VIEW -n &lt;activity-name&gt; -d "file://&lt;path-to-file&gt;"</code></p><div class="admonition help"><p class=admonition-title>Help</p><p><code>-n</code> stands for "name"</p></div><p>Here is an example <code>metadata.txt</code> that will open ISO files with PPSSPP:</p><div class=codehilite><pre><span></span><span class=nf>collection</span><span class=o>:</span> <span class=n>PSP</span>
<span class=nf>extension</span><span class=o>:</span> <span class=n>iso</span>
<span class=nf>launch</span><span class=o>:</span> <span class=n>am</span> <span class=n>start</span> --<span class=n>user</span> 0
  -a android.intent.action.VIEW
  -n org.ppsspp.ppsspp/.PpssppActivity
  -d <span class=s2>&quot;file://{file.path}&quot;</span>
</pre></div><h3 id=run-a-custom-command>Run a custom command</h3><p>Some apps simply don't support opening files, for example because they rely on a built-in file browser or some other reasons. The way to call these apps may differ from what's described above, or they might need additional parameters. You'll have to ask the developers or look around the source code in this case. See below for some examples.</p><h2 id=app-specific-notes>App-specific notes</h2><div class="admonition tip"><p class=admonition-title>Android metadata generator</p><p><a href=http://pegasus-frontend.org/tools/metagen-android/ >This online tool</a> can help with generating the launch commands for various emulators.</p></div><h3 id=retroarch>RetroArch</h3><p>RetroArch has different versions available on Google Play and their site: the standard app is called <strong>RetroArch</strong>, which should work generally on all devices, and there are releases that only support 32- or 64-bit devices (eg. <strong>RetroArch64</strong>, with the name "RetroArch (AArch64)" when installed). Depending on which one you'd like to use, the launch command will be slightly different.</p><p>Unlike must applications, RetroArch happens to use a large number of custom parameters. It can be launched like this:</p><h4 id=retroarch-standard>RetroArch (standard):</h4><div class=codehilite><pre><span></span><span class=nf>collection</span><span class=o>:</span> <span class=n>NES</span>
<span class=nf>extensions</span><span class=o>:</span> <span class=n>zip</span>
<span class=nf>launch</span><span class=o>:</span> <span class=n>am</span> <span class=n>start</span> --<span class=n>user</span> 0
  -n com.retroarch/.browser.retroactivity.RetroActivityFuture
  -e ROM <span class=o>{</span>file.path<span class=o>}</span>
  -e LIBRETRO /data/data/com.retroarch/cores/fceumm_libretro_android.so
  -e CONFIGFILE /storage/emulated/0/Android/data/com.retroarch/files/retroarch.cfg
  -e IME com.android.inputmethod.latin/.LatinIME
  -e DATADIR /data/data/com.retroarch
  -e APK /data/app/com.retroarch-1/base.apk
  -e SDCARD /storage/emulated/0
  -e EXTERNAL /storage/emulated/0/Android/data/com.retroarch/files
  --activity-clear-top
</pre></div><h4 id=retroarch64retroarch-plus-aarch64>RetroArch64/RetroArch Plus (AArch64):</h4><div class=codehilite><pre><span></span><span class=nf>collection</span><span class=o>:</span> <span class=n>NES</span>
<span class=nf>extensions</span><span class=o>:</span> <span class=n>zip</span>
<span class=nf>launch</span><span class=o>:</span> <span class=n>am</span> <span class=n>start</span> --<span class=n>user</span> 0
  -n com.retroarch.aarch64/com.retroarch.browser.retroactivity.RetroActivityFuture
  -e ROM <span class=o>{</span>file.path<span class=o>}</span>
  -e LIBRETRO /data/data/com.retroarch.aarch64/cores/fceumm_libretro_android.so
  -e CONFIGFILE /storage/emulated/0/Android/data/com.retroarch.aarch64/files/retroarch.cfg
  -e IME com.android.inputmethod.latin/.LatinIME
  -e DATADIR /data/data/com.retroarch.aarch64
  -e APK /data/app/com.retroarch.aarch64-1/base.apk
  -e SDCARD /storage/emulated/0
  -e EXTERNAL /storage/emulated/0/Android/data/com.retroarch.aarch64/files
  --activity-clear-top
</pre></div><p>(based on the source code of their Android port at the time of writing).</p><div class="admonition tip"><p class=admonition-title>Android metadata generator</p><p><a href=http://pegasus-frontend.org/tools/metagen-android/ >This online tool</a> can help with generating the launch commands for RetroArch.</p></div><p>The important parts here are the <strong>core</strong> and the <strong>storage</strong> paths. Make sure you <strong>correct the paths</strong> of the above example to match your system and collection:</p><ul><li><code>/storage/emulated/0</code> is the absolute path to the internal storage on my phone. This can be completely different on other devices (eg. <code>/storage/sdcard</code>). Most file browser apps can tell you the correct path, then you can replace all occurrences above.</li><li><code>/data/data/com.retroarch/cores/fceumm_libretro_android.so</code> is the libretro core I've installed using the RetroArch menu. You'll only need to change the <code>fceumm_libretro_android.so</code> part. You can find the available cores <a href=http://buildbot.libretro.com/nightly/android/latest/armeabi-v7a/ >here</a>.</li><li>If you've created a custom configuration file inside RetroArch, you can change <code>CONFIGFILE</code> to point to that instead of the default.</li></ul><div class="admonition help"><p class=admonition-title>Help</p><p><code>-e KEY VALUE</code> defines an extra parameter, specific to the app. Unlike the file opening before, RetroArch does not need <code>file://</code> for the ROM path.</p></div><div class="admonition note"><p class=admonition-title>Note</p><p>There is also a third option available on RetroArch's page, a 32-bit-only package called <code>RetroArch_ra32.apk</code>. To use that, replace <code>aarch64</code> in the example above with <code>ra32</code>.</p></div><h3 id=known-emulators>Known emulators</h3><p>Here's an incomplete list of emulators that can open external files using <code>android.intent.action.VIEW</code>. If you think some of the entries are incorrect, or you'd like to extend this list, feel free to open an Issue <a href=https://github.com/mmatyas/pegasus-frontend/issues>here</a>.</p><div class="admonition tip"><p class=admonition-title>Android metadata generator</p><p><a href=http://pegasus-frontend.org/tools/metagen-android/ >This online tool</a> can help with generating the launch commands for various emulators.</p></div><table><thead><tr><th align=left>App name</th><th align=left>Activity</th></tr></thead><tbody><tr><td align=left>2600.emu</td><td align=left><code>com.explusalpha.A2600Emu/com.imagine.BaseActivity</code></td></tr><tr><td align=left>C54.emu</td><td align=left><code>com.explusalpha.C64Emu/com.imagine.BaseActivity</code></td></tr><tr><td align=left>Citra</td><td align=left>no support yet, but their code is open source</td></tr><tr><td align=left>ClassicBoy</td><td align=left><code>com.portableandroid.classicboyLite/com.portableandroid.classicboy.EntryActivity</code></td></tr><tr><td align=left>Dolphin</td><td align=left><code>org.dolphinemu.dolphinemu/.activities.AppLinkActivity</code></td></tr><tr><td align=left>DraStic</td><td align=left><code>com.dsemu.drastic/.DraSticActivity</code></td></tr><tr><td align=left>Emulator for NES/SNES - Arcade Classic Games</td><td align=left>no support</td></tr><tr><td align=left>ePSXe</td><td align=left>no support, but has workaround -- see the metadata generator page</td></tr><tr><td align=left>GBA.emu</td><td align=left><code>com.explusalpha.GbaEmu/com.imagine.BaseActivity</code></td></tr><tr><td align=left>GBC.emu</td><td align=left><code>com.explusalpha.GbcEmu/com.imagine.BaseActivity</code></td></tr><tr><td align=left>John emulators</td><td align=left>no support</td></tr><tr><td align=left>MD.emu</td><td align=left><code>com.explusalpha.MdEmu/com.imagine.BaseActivity</code></td></tr><tr><td align=left>MegaN64</td><td align=left>no support</td></tr><tr><td align=left>MSX.emu</td><td align=left><code>com.explusalpha.MsxEmu/com.imagine.BaseActivity</code></td></tr><tr><td align=left>Mupen64 Plus AE</td><td align=left><code>paulscode.android.mupen64plusae/.MainActivity</code></td></tr><tr><td align=left>Neo.emu</td><td align=left><code>com.explusalpha.NeoEmu/com.imagine.BaseActivity</code></td></tr><tr><td align=left>NES.emu</td><td align=left><code>com.explusalpha.NesEmu/com.imagine.BaseActivity</code></td></tr><tr><td align=left>NGP.emu</td><td align=left><code>com.explusalpha.NgpEmu/com.imagine.BaseActivity</code></td></tr><tr><td align=left>Nostalgia.NES</td><td align=left>no support</td></tr><tr><td align=left>PPSSPP</td><td align=left><code>org.ppsspp.ppsspp/.PpssppActivity</code></td></tr><tr><td align=left>Reicast</td><td align=left><code>com.reicast.emulator/.MainActivity</code></td></tr><tr><td align=left>Snes9xPlus</td><td align=left><code>com.explusalpha.Snes9xPlus/com.imagine.BaseActivity</code></td></tr><tr><td align=left>SuperRetro16</td><td align=left><code>com.bubblezapgames.supergnes/.IntentFilterActivity</code></td></tr><tr><td align=left>SuperRetro16 Lite</td><td align=left><code>com.bubblezapgames.supergnes_lite/com.bubblezapgames.supergnes.IntentFilterActivity</code></td></tr></tbody></table><h2 id=additional-notes>Additional notes</h2><ul><li>Video playback has a high battery drain</li><li>Unmounting the SD card while Pegasus is running may force close it</li><li>If you're launching a memory-intensive application, the Android OS may decide to close Pegasus</li><li>Shutdown and reboot are not available due to Android restrictions</li></ul></div></div><footer class="col-md-12 text-center"><hr><p><small>Copyright &copy; 2018-2021 M치ty치s Mustoha</small><br><small>Documentation built with <a href=http://www.mkdocs.org/ >MkDocs</a>.</small></p></footer><script src=//ajax.googleapis.com/ajax/libs/jquery/1.12.4/jquery.min.js></script><script src=../../js/bootstrap-3.0.3.min.js></script><script>var base_url = "../.."</script><script src=../../js/base.js></script><script src=../../search/main.js></script><div class=modal id=mkdocs_search_modal tabindex=-1 role=dialog aria-labelledby=searchModalLabel aria-hidden=true><div class="modal-dialog modal-lg"><div class=modal-content><div class=modal-header><button type=button class=close data-dismiss=modal><span aria-hidden=true>&times;</span> <span class=sr-only>Close</span></button><h4 class=modal-title id=searchModalLabel>Search</h4></div><div class=modal-body><p>From here you can search these documents. Enter your search terms below.</p><form><div class=form-group><input class=form-control placeholder=Search... id=mkdocs-search-query title="Type search term here"></div></form><div id=mkdocs-search-results></div></div><div class=modal-footer></div></div></div></div><div class=modal id=mkdocs_keyboard_modal tabindex=-1 role=dialog aria-labelledby=keyboardModalLabel aria-hidden=true><div class=modal-dialog><div class=modal-content><div class=modal-header><h4 class=modal-title id=keyboardModalLabel>Keyboard Shortcuts</h4><button type=button class=close data-dismiss=modal><span aria-hidden=true>&times;</span><span class=sr-only>Close</span></button></div><div class=modal-body><table class=table><thead><tr><th style="width: 20%;">Keys</th><th>Action</th></tr></thead><tbody><tr><td class="help shortcut"><kbd>?</kbd></td><td>Open this help</td></tr><tr><td class="next shortcut"><kbd>n</kbd></td><td>Next page</td></tr><tr><td class="prev shortcut"><kbd>p</kbd></td><td>Previous page</td></tr><tr><td class="search shortcut"><kbd>s</kbd></td><td>Search</td></tr></tbody></table></div><div class=modal-footer></div></div></div></div></body></html>