<!DOCTYPE html><html lang=en><head><script async src="https://www.googletagmanager.com/gtag/js?id=G-KQLQN0DTLR"></script><script>window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments);}gtag('js',new Date());gtag('config','G-KQLQN0DTLR');</script><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="Documentation and customization guides for the Pegasus frontend."><meta name=author content="Mátyás Mustoha"><link rel=canonical href=http://www.pegasus-frontend.org/docs/dev/build/ ><link rel="shortcut icon" href=../../img/favicon.ico><title>Building - Pegasus Docs</title><link rel=stylesheet href=https://use.fontawesome.com/releases/v5.12.0/css/all.css><link rel=stylesheet href=https://use.fontawesome.com/releases/v5.12.0/css/v4-shims.css><link rel=stylesheet href=//cdn.jsdelivr.net/npm/hack-font@3.3.0/build/web/hack.min.css><link href="//fonts.googleapis.com/css?family=PT+Sans:400,400italic,700,700italic&subset=latin-ext,latin" rel=stylesheet><link href="//fonts.googleapis.com/css?family=Open+Sans:300italic,400italic,700italic,400,300,600,700&subset=latin-ext,latin" rel=stylesheet><link href=../../css/bootstrap-custom.min.css rel=stylesheet><link href=../../css/base.min.css rel=stylesheet><link href=../../css/cinder.min.css rel=stylesheet><link href=../../css/extra.css rel=stylesheet><link href=../../css/codehl.css rel=stylesheet><link href="//fonts.googleapis.com/icon?family=Material+Icons" rel=stylesheet><!--[if lt IE 9]>
            <script src="https://cdn.jsdelivr.net/npm/html5shiv@3.7.3/dist/html5shiv.min.js"></script>
            <script src="https://cdn.jsdelivr.net/npm/respond.js@1.4.2/dest/respond.min.js"></script>
        <![endif]--></head><body><div class="navbar navbar-default navbar-fixed-top" role=navigation><div class=container><div class=navbar-header><button type=button class=navbar-toggle data-toggle=collapse data-target=.navbar-collapse><span class=sr-only>Toggle navigation</span> <span class=icon-bar></span> <span class=icon-bar></span> <span class=icon-bar></span></button> <a class=navbar-brand href=../..>Pegasus Docs</a></div><div class="navbar-collapse collapse"><ul class="nav navbar-nav"><li><a href=../..>Home</a></li><li class=dropdown><a href=# class=dropdown-toggle data-toggle=dropdown>User Guide <b class=caret></b></a><ul class=dropdown-menu><li class=dropdown-submenu><a tabindex=-1 href="">Setup</a><ul class=dropdown-menu><li><a href=../../user-guide/getting-started/ >Getting started</a></li><li><a href=../../user-guide/controls/ >Default controls</a></li><li><a href=../../user-guide/portable/ >Portable mode</a></li><li><a href=../../user-guide/config-dirs/ >Config directories</a></li></ul></li><li class=dropdown-submenu><a tabindex=-1 href="">Platform notes</a><ul class=dropdown-menu><li><a href=../../user-guide/platform-windows/ >Windows</a></li><li><a href=../../user-guide/platform-android/ >Android</a></li><li><a href=../../user-guide/platform-android-example/ >Android example</a></li><li><a href=../../user-guide/platform-linux/ >Linux</a></li><li><a href=../../user-guide/platform-raspberry/ >Raspberry Pi</a></li><li><a href=../../user-guide/platform-macos/ >MacOS</a></li></ul></li><li class=dropdown-submenu><a tabindex=-1 href="">Adding games</a><ul class=dropdown-menu><li><a href=../../user-guide/adding-games/ >How to add games</a></li><li><a href=../../user-guide/meta-files/ >Metadata files</a></li><li><a href=../../user-guide/meta-assets/ >Asset files</a></li><li><a href=../../user-guide/meta-sources/ >Other sources</a></li></ul></li><li><a href=../../user-guide/faq/ >FAQ</a></li><li><a href=../../user-guide/installing-themes/ >Installing themes</a></li><li><a href=../../user-guide/scripting/ >Scripting</a></li><li><a href=../../user-guide/breaking-changes/ >Breaking changes</a></li></ul></li><li class=dropdown><a href=# class=dropdown-toggle data-toggle=dropdown>Theme Dev <b class=caret></b></a><ul class=dropdown-menu><li><a href=../../themes/overview/ >Overview</a></li><li><a href=../../themes/extra/ >Special features</a></li><li><a href=../../themes/qml-tutorials/ >QML tutorials</a></li><li><a href=../../themes/qml-modules/ >QML modules</a></li><li class=dropdown-submenu><a tabindex=-1 href="">Step-by-step: Simple theme</a><ul class=dropdown-menu><li><a href=../../themes/example-simple-intro/ >Introduction</a></li><li><a href=../../themes/example-simple-ch1/ >Part 1</a></li><li><a href=../../themes/example-simple-ch2/ >Part 2</a></li><li><a href=../../themes/example-simple-ch3/ >Part 3</a></li></ul></li><li class=dropdown-submenu><a tabindex=-1 href="">Step-by-step: Flixnet theme</a><ul class=dropdown-menu><li><a href=../../themes/example-flixnet-intro/ >Introduction</a></li><li><a href=../../themes/example-flixnet-ch1/ >Part 1</a></li><li><a href=../../themes/example-flixnet-ch2/ >Part 2</a></li><li><a href=../../themes/example-flixnet-ch3/ >Part 3</a></li><li><a href=../../themes/example-flixnet-ch4/ >Part 4</a></li><li><a href=../../themes/example-flixnet-ch5/ >Part 5</a></li></ul></li><li><a href=../../themes/api/ >API reference</a></li></ul></li><li class="dropdown active"><a href=# class=dropdown-toggle data-toggle=dropdown>Core Dev <b class=caret></b></a><ul class=dropdown-menu><li><a href=../translate/ >Translations</a></li><li><a href=../meta-syntax/ >Metadata syntax</a></li><li class=active><a href=./ >Building</a></li><li><a href=../install-qt/ >Installing Qt</a></li><li><a href=../cross-compile-qt/ >Cross compiling Qt</a></li><li><a href=../deploy/ >Deployment</a></li></ul></li></ul><ul class="nav navbar-nav navbar-right"><li><a href=# data-toggle=modal data-target=#mkdocs_search_modal><i class="fas fa-search"></i> Search</a></li><li><a rel=prev href=../meta-syntax/ ><i class="fas fa-arrow-left"></i> Previous</a></li><li><a rel=next href=../install-qt/ >Next <i class="fas fa-arrow-right"></i></a></li></ul></div></div></div><div class=container><div class=col-md-3><div class="bs-sidebar hidden-print affix well" role=complementary><ul class="nav bs-sidenav"><li class="first-level active"><a href=#building-pegasus>Building Pegasus</a></li><li class=second-level><a href=#get-the-source-code>Get the source code</a></li><li class=second-level><a href=#build>Build</a></li><li class=third-level><a href=#using-qt-creator>Using Qt Creator</a></li><li class=third-level><a href=#using-qmake>Using qmake</a></li><li class=third-level><a href=#using-cmake>Using CMake</a></li><li class=second-level><a href=#configuration-options>Configuration options</a></li><li class=third-level><a href=#using-qmake_1>Using qmake</a></li><li class=third-level><a href=#using-cmake_1>Using CMake</a></li></ul></div></div><div class=col-md-9 role=main><h1 id=building-pegasus>Building Pegasus</h1><p>Pegasus is a cross-platform native application written in C++ and built mainly on top of the Qt libraries. Manually building has the following requirements:</p><ul><li><strong>C++11</strong>-supporting compiler <em>(eg. G++ 4.9 or Visual Studio 2017)</em></li><li><strong>Qt</strong> 5.15 or later, with the following modules:<ul><li>QML module</li><li>Qt Quick 2 module</li><li>Multimedia module</li><li>Svg module</li><li>Gamepad module, optional<sup>1</sup></li></ul></li><li><strong>SDL</strong> 2.0.4 or later, optional<sup>1</sup></li><li><strong>Git</strong>, optional<sup>2</sup></li><li><strong>CMake</strong> 3.16 or later, optional<sup>3</sup></li></ul><div class="admonition info"><p class=admonition-title>Info</p><ol><li>You can use either Qt or SDL2 for gamepad handling. SDL2 has better compatibility, but may not be readily available on as many platforms as Qt.</li><li>If available, Git will be used to determine the version number shown in the program.</li><li>You can either build with QMake or CMake. When building with CMake, at least Qt 5.15 is required.</li></ol></div><p>To <strong>install Qt</strong>, you can follow the guide on <a href=../install-qt/ >this page</a>.<br>To <strong>install SDL2</strong>, you can use your platform's package manager or you can download the library directly from its <a href=https://www.libsdl.org/download-2.0.php>official site</a>.<br>To <strong>install Git</strong>, use your platform's package manager, or the <a href=https://git-scm.com/downloads>official installer</a>, and make sure it's available in your <code>PATH</code>.<br>To <strong>install CMake</strong>, use your platform's package manager, or the <a href=https://cmake.org/download/ >official release</a>, and make sure it's available in your <code>PATH</code>.</p><h2 id=get-the-source-code>Get the source code</h2><p>You can find the sources at <a href=https://github.com/mmatyas/pegasus-frontend>https://github.com/mmatyas/pegasus-frontend</a>. Download it using your favorite Git client, or as a zip file from the webpage.</p><p>If you are using the command line, make sure you <strong>also get the submodules:</strong></p><div class=codehilite><pre><span></span><code>git clone --recursive https://github.com/mmatyas/pegasus-frontend
</code></pre></div><p>In case you forgot, you can do it after <code>clone</code> too:</p><div class=codehilite><pre><span></span><code>git submodule update --init
</code></pre></div><h2 id=build>Build</h2><p>Pegasus is a Qt project. Qt provides a graphical IDE, called <em>Qt Creator</em>, which you can use building such projects, or you can call Qt's <code>qmake</code> tool directly from the command line.</p><p>Alternatively, if you have Qt 5.15 or later, you can also use CMake, of which at least version 3.16 is required. You can find the official CMake releases <a href=https://cmake.org/download/ >here</a>.</p><h3 id=using-qt-creator>Using Qt Creator</h3><ol><li>Open Qt Creator and open the project file (<code>pegasus.pro</code>)</li><li>Qt Creator will ask you which Qt setup ("kit") you want to use (in case you've installed multiple versions), and where you want to place the generated build files. If everything's OK, click Configure Project.</li><li><em>(optional)</em> Change the configuration (see <a href=#configuration-options>below</a>)</li><li><p>In the bottom left corner, on the sidebar of Qt Creator, you can find 4 buttons:</p><p><table><tr><td rowspan=0><img src=../img/qtcreator-buttons.png></td><td><ul><li>with the button that looks like a desktop monitor, you can change the build type (optimized Release build or development-friendly but slower Debug build)</li><li>the green arrow will build and run the program</li><li>the green arrow with a bug will also open several debug toolbars</li><li>the hammer will build the project but won't start the application</li></ul></td></tr></table></p></li><li><p>Change the build type to Release, and press the green arrow to build and run the project.</p></li></ol><h3 id=using-qmake>Using qmake</h3><ol><li>Create a build directory somewhere, and step into it</li><li>Call <code>qmake</code> like this: <code>/path/to/qmake path/to/pegasus [options]</code>.<ul><li>If you have multiple Qt versions installed, make sure you call the right <code>qmake</code>.<br>If you've installed using the official release from the Qt site, you can find it in <code>[qt-installdir]/Qt5/[version]/gcc_64/bin</code>. You can add it to your <code>PATH</code> if you want, but it's not necessary.</li><li>You can also change some configuration options, which you can find <a href=#configuration-options>below</a>.</li></ul></li><li>Call <code>make</code></li><li><em>(optional)</em> Call <code>make check</code> to run tests.</li><li><em>(optional)</em> Call <code>make install</code></li></ol><h3 id=using-cmake>Using CMake</h3><p>This section assumes you have some experience with CMake, as you can build Pegasus just like any other CMake project:</p><ol><li>Create a build directory somewhere, and step into it</li><li>Call <code>cmake</code> like this: <code>/path/to/cmake path/to/pegasus [options]</code>, or use the CMake GUI for configuration; you can find the details <a href=#configuration-options>below</a></li><li>Call your build tool (eg. <code>make</code>) to build the project</li><li><em>(optional)</em> Call <code>ctest</code> to run tests</li><li><em>(optional)</em> Call the <code>install/strip</code> target of your build tool for deployment</li></ol><h2 id=configuration-options>Configuration options</h2><h3 id=using-qmake_1>Using qmake</h3><p>For qmake, the Qt configuration tool, you can change build parameters by appending <code>KEY=VALUE</code> pairs to its command line call. If you're using Qt Creator, you can find these settings on the Projects -&gt; Build settings tab, where you can modify the Additional arguments option (see <a href=https://doc.qt.io/qtcreator/creator-build-settings.html#build-steps>here</a>).</p><p><img alt="build steps screenshot" src=../img/build-pegasus-1.png></p><p>The following parameters are supported:</p><table><thead><tr><th>Option</th><th>Description</th></tr></thead><tbody><tr><td><code>SDL_LIBS</code></td><td>A space-separated list of linker flags (ie. <code>-l</code> and <code>-L</code>) for linking SDL (but you should not link to <code>SDL2main</code>)</td></tr><tr><td><code>SDL_INCLUDES</code></td><td>A space-separated list of include directories for SDL; one of them must contain the file <code>SDL.h</code></td></tr><tr><td><code>USE_SDL_GAMEPAD</code></td><td>By default, the build will use Qt's built-in gamepad support; to improve compatibility, you can use SDL2 instead, by setting this to <code>1</code> (default: OFF)</td></tr><tr><td><code>USE_SDL_POWER</code></td><td>Except on Android, by default Pegasus has no information about the battery satatus of the device; setting this to <code>1</code> will enable an SDL-based implementation (default: OFF)</td></tr><tr><td><code>ENABLE_APNG</code></td><td>Enable support for animated PNG files; this requires a Qt version that was built with an APNG-patched libpng (default: OFF)</td></tr></tbody></table><p>If <code>SDL_LIBS</code> and <code>SDL_INCLUDES</code> are both empty, but an SDL-option is enabled (eg. <code>USE_SDL_GAMEPAD</code>), then <code>pkg-config</code> will be used to find it, on platforms where it is available. Note that only the gamepad module is used from SDL, so if you're building it on your own, you can turn off many of its features during configuration. You should not link to <code>SDL2main</code>.</p><h4 id=deployment>Deployment</h4><p>Some platforms optionally support installing and deploying builds. In practice, this means preparing the final executable and copying it to a particular location. The behaviour can be controlled through the following parameters:</p><table><thead><tr><th>Option</th><th>Description</th></tr></thead><tbody><tr><td><code>INSTALLDIR</code></td><td>The general installation directory used by <code>make install</code>. Defaults to <code>/opt/pegasus-frontend</code> on Linux, <code>/usr/local/pegasus-frontend</code> on Mac and <code>C:\pegasus-frontend</code> on Windows.</td></tr><tr><td><code>INSTALL_BINDIR</code></td><td>The installation directory of the executable. Defaults to <code>INSTALLDIR</code>. On most distros <code>/usr/bin</code> is a good value.</td></tr><tr><td><code>INSTALL_DOCDIR</code></td><td>If set, <code>make install</code> will copy the license and readme files there. On most distros <code>/usr/share/doc/pegasus-frontend</code> is a good value.</td></tr><tr><td><code>INSTALL_DESKTOPDIR</code></td><td>Linux only. If set, <code>make install</code> will create an XDG desktop file there (making Pegasus appear in the main menu). Unset by default, on most distros <code>/usr/share/applications</code> is a good value.</td></tr><tr><td><code>INSTALL_ICONDIR</code></td><td>Linux only. If set, <code>make install</code> will create an XDG icon file there (making Pegasus have an icon on the tray and the menu). Unset by default, on most distros <code>/usr/share/pixmaps</code> or <code>/usr/share/icons/hicolor</code> is a good value.</td></tr><tr><td><code>INSTALL_APPSTREAMDIR</code></td><td>Linux only. If set, <code>make install</code> will create an AppStream XML entry there (making Pegasus appear in certain app store applications). Unset by default, on most distros <code>/app/share/metainfo</code> is a good value.</td></tr></tbody></table><h4 id=example>Example</h4><div class=codehilite><pre><span></span><code>qmake path/to/sources <span class=se>\</span>
    <span class=nv>USE_SDL_GAMEPAD</span><span class=o>=</span><span class=m>1</span> <span class=se>\</span>
    <span class=nv>SDL_LIBS</span><span class=o>=</span><span class=s2>&quot;-L/path/to/sdl/lib/ -lSDL2 -Wl,--no-undefined&quot;</span> <span class=se>\</span>
    <span class=nv>SDL_INCLUDES</span><span class=o>=</span>/path/to/sdl/include/SDL2/
    <span class=nv>INSTALL_BINDIR</span><span class=o>=</span>/usr/bin <span class=se>\</span>
    <span class=nv>INSTALL_DOCDIR</span><span class=o>=</span>/usr/share/doc/pegasus-frontend <span class=se>\</span>
    <span class=nv>INSTALL_ICONDIR</span><span class=o>=</span>/usr/share/icons/hicolor <span class=se>\</span>
    <span class=nv>INSTALL_DESKTOPDIR</span><span class=o>=</span>/app/share/applications <span class=se>\</span>
    <span class=nv>INSTALL_APPSTREAMDIR</span><span class=o>=</span>/app/share/metainfo
</code></pre></div><h3 id=using-cmake_1>Using CMake</h3><p>For CMake, you can either use its GUI, or add <code>-Dkey=value</code> option to the command line call. In addition to the standard CMake parameters, the following Pegasus-specific options are supported:</p><table><thead><tr><th>Option</th><th>Description</th></tr></thead><tbody><tr><td><code>PEGASUS_USE_SDL2_GAMEPAD</code></td><td>Use SDL2 for gamepad support (default: ON)</td></tr><tr><td><code>PEGASUS_USE_SDL2_POWER</code></td><td>Use SDL2 for battery info support (default: ON)</td></tr><tr><td><code>PEGASUS_ENABLE_APNG</code></td><td>Enable animated PNG support; this requires a Qt version that was built with an APNG-patched libpng (default: OFF)</td></tr><tr><td><code>PEGASUS_STATIC_CXX</code></td><td>Link stdc++ statically (default: OFF)</td></tr><tr><td><code>PEGASUS_ENABLE_LTO</code></td><td>Allow link-time optimizations, if the compiler supports this (but increasing build time) (default: ON)</td></tr></tbody></table><p>To explicitly tell where Qt and SDL is located, you can use <code>CMAKE_PREFIX_PATH</code>, which is a semicolon-separated list of search paths.</p><p>For deployment, the standard <code>GNUInstallDirs</code> module is used, ie. on Linux most paths should have a correct default value. You can use <code>CMAKE_INSTALL_PREFIX</code> to set the root deployment directory. If you wish to customize the paths, use the following parameters:</p><table><thead><tr><th>Option</th><th>Description</th></tr></thead><tbody><tr><td><code>PEGASUS_INSTALLDIR</code></td><td>The general deployment directory</td></tr><tr><td><code>PEGASUS_INSTALL_BINDIR</code></td><td>The deployment directory of the executable</td></tr><tr><td><code>PEGASUS_INSTALL_DOCDIR</code></td><td>The deployment directory of the license and readme files</td></tr><tr><td><code>PEGASUS_INSTALL_DESKTOPDIR</code></td><td>Linux only, the deployment directory of the XDG desktop file (making Pegasus appear in the main menu)</td></tr><tr><td><code>PEGASUS_INSTALL_ICONDIR</code></td><td>Linux only, the deployment directory of the XDG icon file there (making Pegasus have an icon on the tray and the menu)</td></tr><tr><td><code>PEGASUS_INSTALL_APPSTREAMDIR</code></td><td>Linux only, the deployment directory of the AppStream XML entry there (making Pegasus appear in certain app store applications)</td></tr></tbody></table><h4 id=example_1>Example</h4><div class=codehilite><pre><span></span><code>cmake path/to/sources  <span class=se>\</span>
  -DCMAKE_PREFIX_PATH<span class=o>=</span><span class=s2>&quot;/opt/Qt5;/opt/SDL2&quot;</span>  <span class=se>\</span>
  -DCMAKE_INSTALL_PREFIX<span class=o>=</span>/usr/  <span class=se>\</span>
  -DPEGASUS_ENABLE_APNG<span class=o>=</span>ON  <span class=se>\</span>
  -DPEGASUS_ENABLE_LTO<span class=o>=</span>OFF
</code></pre></div></div></div><footer class="col-md-12 text-center"><hr><p><small>Copyright &copy; 2018-2021 Mátyás Mustoha</small><br><small>Documentation built with <a href=http://www.mkdocs.org/ >MkDocs</a>.</small></p></footer><script src=//ajax.googleapis.com/ajax/libs/jquery/1.12.4/jquery.min.js></script><script src=../../js/bootstrap-3.0.3.min.js></script><script>var base_url = "../.."</script><script src=../../js/base.js></script><script src=../../search/main.js></script><div class=modal id=mkdocs_search_modal tabindex=-1 role=dialog aria-labelledby=searchModalLabel aria-hidden=true><div class="modal-dialog modal-lg"><div class=modal-content><div class=modal-header><button type=button class=close data-dismiss=modal><span aria-hidden=true>&times;</span> <span class=sr-only>Close</span></button><h4 class=modal-title id=searchModalLabel>Search</h4></div><div class=modal-body><p>From here you can search these documents. Enter your search terms below.</p><form><div class=form-group><input class=form-control placeholder=Search... id=mkdocs-search-query title="Type search term here"></div></form><div id=mkdocs-search-results></div></div><div class=modal-footer></div></div></div></div><div class=modal id=mkdocs_keyboard_modal tabindex=-1 role=dialog aria-labelledby=keyboardModalLabel aria-hidden=true><div class=modal-dialog><div class=modal-content><div class=modal-header><h4 class=modal-title id=keyboardModalLabel>Keyboard Shortcuts</h4><button type=button class=close data-dismiss=modal><span aria-hidden=true>&times;</span><span class=sr-only>Close</span></button></div><div class=modal-body><table class=table><thead><tr><th style="width: 20%;">Keys</th><th>Action</th></tr></thead><tbody><tr><td class="help shortcut"><kbd>?</kbd></td><td>Open this help</td></tr><tr><td class="next shortcut"><kbd>n</kbd></td><td>Next page</td></tr><tr><td class="prev shortcut"><kbd>p</kbd></td><td>Previous page</td></tr><tr><td class="search shortcut"><kbd>s</kbd></td><td>Search</td></tr></tbody></table></div><div class=modal-footer></div></div></div></div></body></html>