<!DOCTYPE html><html lang=en><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-60112109-3"></script><script>window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments);}gtag('js',new Date());gtag('config','UA-60112109-3');</script><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="Documentation and customization guides for the Pegasus frontend."><meta name=author content="M치ty치s Mustoha"><link rel=canonical href=http://www.pegasus-frontend.org/docs/themes/example-flixnet-ch4/ ><link rel="shourtcut icon" href=../../img/favicon.ico><title>Part 4 - Pegasus Docs</title><link rel=stylesheet href=//cdnjs.cloudflare.com/ajax/libs/font-awesome/5.11.2/css/all.css integrity="sha256-46qynGAkLSFpVbEBog43gvNhfrOj+BmwXdxFgVK/Kvc=" crossorigin=anonymous><link rel=stylesheet href=//cdn.jsdelivr.net/npm/hack-font@3.3.0/build/web/hack.min.css><link href="//fonts.googleapis.com/css?family=PT+Sans:400,400italic,700,700italic&subset=latin-ext,latin" rel=stylesheet><link href="//fonts.googleapis.com/css?family=Open+Sans:300italic,400italic,700italic,400,300,600,700&subset=latin-ext,latin" rel=stylesheet><link href=../../css/bootstrap-custom.min.css rel=stylesheet><link href=../../css/base.min.css rel=stylesheet><link href=../../css/cinder.min.css rel=stylesheet><link href=../../css/highlight.min.css rel=stylesheet><link href=../../css/extra.css rel=stylesheet><link href=../../css/codehl.css rel=stylesheet><link href="//fonts.googleapis.com/icon?family=Material+Icons" rel=stylesheet><!--[if lt IE 9]>
            <script src="https://cdn.jsdelivr.net/npm/html5shiv@3.7.3/dist/html5shiv.min.js"></script>
            <script src="https://cdn.jsdelivr.net/npm/respond.js@1.4.2/dest/respond.min.js"></script>
        <![endif]--><script src=//ajax.googleapis.com/ajax/libs/webfont/1.6.26/webfont.js></script><script>WebFont.load({
        google: {
            families: ['Open Sans', 'PT Sans']
        }
    });</script></head><body><div class="navbar navbar-default navbar-fixed-top" role=navigation><div class=container><div class=navbar-header><button type=button class=navbar-toggle data-toggle=collapse data-target=.navbar-collapse><span class=sr-only>Toggle navigation</span> <span class=icon-bar></span> <span class=icon-bar></span> <span class=icon-bar></span></button> <a class=navbar-brand href=../..>Pegasus Docs</a></div><div class="navbar-collapse collapse"><ul class="nav navbar-nav"><li><a href=../..>Home</a></li><li class=dropdown><a href=# class=dropdown-toggle data-toggle=dropdown>User Guide <b class=caret></b></a><ul class=dropdown-menu><li><a href=../../user-guide/getting-started/ >Getting started</a></li><li><a href=../../user-guide/controls/ >Default controls</a></li><li class=dropdown-submenu><a tabindex=-1 href="">Platform Notes</a><ul class=dropdown-menu><li><a href=../../user-guide/platform-android/ >Android</a></li><li><a href=../../user-guide/platform-linux/ >Linux</a></li><li><a href=../../user-guide/platform-retropie/ >RetroPie</a></li><li><a href=../../user-guide/platform-windows/ >Windows</a></li></ul></li><li class=dropdown-submenu><a tabindex=-1 href="">Game files</a><ul class=dropdown-menu><li><a href=../../user-guide/meta-files/ >Metadata files</a></li><li><a href=../../user-guide/meta-assets/ >Asset files</a></li><li><a href=../../user-guide/meta-examples/ >Real world examples</a></li><li><a href=../../user-guide/meta-sources/ >Other data sources</a></li></ul></li><li><a href=../../user-guide/installing-themes/ >Installing themes</a></li><li><a href=../../user-guide/config-dirs/ >Config directories</a></li><li><a href=../../user-guide/scripting/ >Scripting</a></li><li><a href=../../user-guide/breaking-changes/ >Breaking changes</a></li></ul></li><li class="dropdown active"><a href=# class=dropdown-toggle data-toggle=dropdown>Theme Dev <b class=caret></b></a><ul class=dropdown-menu><li><a href=../overview/ >Overview</a></li><li><a href=../virtual-screen/ >Virtual screen</a></li><li><a href=../qml-tutorials/ >QML tutorials</a></li><li><a href=../qml-modules/ >QML modules</a></li><li class=dropdown-submenu><a tabindex=-1 href="">Step-by-step: Simple theme</a><ul class=dropdown-menu><li><a href=../example-simple-intro/ >Introduction</a></li><li><a href=../example-simple-ch1/ >Part 1</a></li><li><a href=../example-simple-ch2/ >Part 2</a></li><li><a href=../example-simple-ch3/ >Part 3</a></li></ul></li><li class=dropdown-submenu><a tabindex=-1 href="">Step-by-step: Flixnet theme</a><ul class=dropdown-menu><li><a href=../example-flixnet-intro/ >Introduction</a></li><li><a href=../example-flixnet-ch1/ >Part 1</a></li><li><a href=../example-flixnet-ch2/ >Part 2</a></li><li><a href=../example-flixnet-ch3/ >Part 3</a></li><li class=active><a href=./ >Part 4</a></li><li><a href=../example-flixnet-ch5/ >Part 5</a></li></ul></li><li><a href=../api/ >API reference</a></li></ul></li><li class=dropdown><a href=# class=dropdown-toggle data-toggle=dropdown>Core Dev <b class=caret></b></a><ul class=dropdown-menu><li><a href=../../dev/translate/ >Translations</a></li><li><a href=../../dev/meta-syntax/ >Metadata syntax</a></li><li><a href=../../dev/build/ >Building</a></li><li><a href=../../dev/install-qt/ >Installing Qt</a></li><li><a href=../../dev/cross-compile-qt/ >Cross compiling Qt</a></li><li><a href=../../dev/deploy/ >Deployment</a></li></ul></li></ul><ul class="nav navbar-nav navbar-right"><li><a href=# data-toggle=modal data-target=#mkdocs_search_modal><i class="fas fa-search"></i> Search</a></li><li><a rel=prev href=../example-flixnet-ch3/ ><i class="fas fa-arrow-left"></i> Previous</a></li><li><a rel=next href=../example-flixnet-ch5/ >Next <i class="fas fa-arrow-right"></i></a></li></ul></div></div></div><div class=container><div class=col-md-3><div class="bs-sidebar hidden-print affix well" role=complementary><ul class="nav bs-sidenav"><li class="first-level active"><a href=#flixnet-theme-part-4-making-things-pretty>Flixnet theme, Part 4: Making things pretty</a></li><li class=second-level><a href=#fancy-game-boxes>Fancy game boxes</a></li><li class=second-level><a href=#looping-the-axes>Looping the axes</a></li><li class=third-level><a href=#vertically>Vertically</a></li><li class=third-level><a href=#horizontally>Horizontally</a></li></ul></div></div><div class=col-md-9 role=main><h1 id=flixnet-theme-part-4-making-things-pretty>Flixnet theme, Part 4: Making things pretty</h1><p>In this chapter, we'll try to make the game cells look better!</p><h2 id=fancy-game-boxes>Fancy game boxes</h2><p>I'll now replace the green game boxes with something better to look at. There are two main cases we have to support:</p><ul><li>if there is an available image for a game, the box should show that</li><li>if there is none, or the image has not loaded yet, the box should show a gray rectangle, with the game's title in the center</li></ul><p>So <code>gameAxisDelegate</code> is our game box that right now contains a green rectangle. I'll turn that into an Item, and, for the two cases above, I'll add an initial gray Rectangle and Image:</p><div class=codehilite><pre><span></span><span class=nx>Component</span> <span class=p>{</span>
    <span class=kd>id: gameAxisDelegate</span>

    <span class=nx>Item</span> <span class=p>{</span>
        <span class=k>width:</span> <span class=nx>vpx</span><span class=p>(</span><span class=mi>240</span><span class=p>)</span>
        <span class=k>height:</span> <span class=nx>vpx</span><span class=p>(</span><span class=mi>135</span><span class=p>)</span>

        <span class=nx>Rectangle</span> <span class=p>{</span>
            <span class=k>anchors.fill:</span> <span class=nx>parent</span>
            <span class=k>color:</span> <span class=s2>&quot;#333&quot;</span>
        <span class=p>}</span>

        <span class=nx>Image</span> <span class=p>{</span>
            <span class=kd>id: image</span>

            <span class=k>anchors.fill:</span> <span class=nx>parent</span>
        <span class=p>}</span>
    <span class=p>}</span>
<span class=p>}</span>
</pre></div><p>So which image asset should we use? A game box is a rectangle with 16:9 aspect ratio, so the <code>banner</code> would be perfect for this. However, since every asset is potentially missing, we should consider showing other images and provide multiple fallbacks. If we don't have a <code>banner</code>, the next similarly sized one is the <code>steam</code> ("grid icon") asset. Because it's wider than 16:9, we'll need to crop it if we don't want black bars or squashed/scretched images (though you might prefer that). If neither image is available, I'll use <code>boxFront</code> as it tends to be commonly available.</p><p>Let's extend the Image object created previously:</p><div class=codehilite><pre><span></span><span class=nx>Image</span> <span class=p>{</span>
    <span class=kd>id: image</span>

    <span class=k>anchors.fill:</span> <span class=nx>parent</span>
    <span class=k>visible:</span> <span class=nx>source</span>

    <span class=c1>// fill the whole area, cropping what lies outside</span>
    <span class=k>fillMode:</span> <span class=nx>Image</span><span class=p>.</span><span class=nx>PreserveAspectCrop</span>

    <span class=k>asynchronous:</span> <span class=kc>true</span>
    <span class=k>source:</span> <span class=nx>assets</span><span class=p>.</span><span class=nx>banner</span> <span class=o>||</span> <span class=nx>assets</span><span class=p>.</span><span class=nx>steam</span> <span class=o>||</span> <span class=nx>assets</span><span class=p>.</span><span class=nx>boxFront</span>
    <span class=nx>sourceSize</span> <span class=p>{</span> <span class=k>width:</span> <span class=mi>256</span><span class=p>;</span> <span class=k>height:</span> <span class=mi>256</span> <span class=p>}</span>
<span class=p>}</span>
</pre></div><p>I've also made some optimizations here:</p><ul><li>I've set <code>asynchronous: true</code>: Loading image files takes some time depending on the device Pegasus runs on. If this property is set to false (default), the program will not react to input until the image is loaded (or noticed that it failed to load). If it's false, the image is loaded "in the background", and input is not blocked; hovewer depending on your theme, you might want to show something in its place for the users during this time (eg. a loading spinner or progress bar).</li><li>I've set <code>sourceSize</code>: This sets the maximum size the image should occupy in the memory. The <a href=https://doc-snapshots.qt.io/qt5-dev/qml-qtquick-image.html#sourceSize-prop>official documentation</a> describes this in detail.</li><li>I've set <code>visible: source</code>, that is, if the <code>source</code> is empty (neither <code>banner</code>, <code>steam</code> or <code>boxFront</code> is available), then ignore this whole object: no input will be ever handled here and there's nothing to see either.</li></ul><p>With these changes, here's how it looks:</p><p><img alt=screenshot src=../img/flixnet_gamebox-images.png></p><p>Starting to take shape, isn't it?</p><p>Let's finish the text-only fallback too:</p><div class=codehilite><pre><span></span><span class=nx>Component</span> <span class=p>{</span>
    <span class=kd>id: gameAxisDelegate</span>

    <span class=nx>Item</span> <span class=p>{</span>
        <span class=k>width:</span> <span class=nx>vpx</span><span class=p>(</span><span class=mi>240</span><span class=p>)</span>
        <span class=k>height:</span> <span class=nx>vpx</span><span class=p>(</span><span class=mi>135</span><span class=p>)</span>

        <span class=nx>Rectangle</span> <span class=p>{</span>
            <span class=k>anchors.fill:</span> <span class=nx>parent</span>
            <span class=k>color:</span> <span class=s2>&quot;#333&quot;</span>
<span class=hll>            <span class=k>visible:</span> <span class=nx>image</span><span class=p>.</span><span class=nx>status</span> <span class=o>!==</span> <span class=nx>Image</span><span class=p>.</span><span class=nx>Ready</span>
</span>
<span class=hll>            <span class=nx>Text</span> <span class=p>{</span>
</span>                <span class=k>text:</span> <span class=nx>modelData</span><span class=p>.</span><span class=nx>title</span>

                <span class=c1>// define the text area</span>
                <span class=k>anchors.fill:</span> <span class=nx>parent</span>
                <span class=k>anchors.margins:</span> <span class=nx>vpx</span><span class=p>(</span><span class=mi>12</span><span class=p>)</span>

                <span class=c1>// align to the center</span>
                <span class=k>horizontalAlignment:</span> <span class=nx>Text</span><span class=p>.</span><span class=nx>AlignHCenter</span>
                <span class=k>verticalAlignment:</span> <span class=nx>Text</span><span class=p>.</span><span class=nx>AlignVCenter</span>
                <span class=k>wrapMode:</span> <span class=nx>Text</span><span class=p>.</span><span class=nx>Wrap</span>

                <span class=c1>// set the font</span>
                <span class=k>color:</span> <span class=s2>&quot;white&quot;</span>
                <span class=k>font.pixelSize:</span> <span class=nx>vpx</span><span class=p>(</span><span class=mi>16</span><span class=p>)</span>
                <span class=k>font.family:</span> <span class=nx>globalFonts</span><span class=p>.</span><span class=nx>sans</span>
            <span class=p>}</span>
        <span class=p>}</span>

        <span class=nx>Image</span> <span class=p>{</span>
            <span class=kd>id: image</span>

            <span class=c1>// ...</span>
        <span class=p>}</span>
    <span class=p>}</span>
<span class=p>}</span>
</pre></div><p>And we're done with the game boxes!</p><h2 id=looping-the-axes>Looping the axes</h2><p>It'd be nice if all of the lists would loop around. You can do two kinds of loop:</p><ul><li>make the list finite and when the last item is reached, jump back to the first one (and also in reverse direction)</li><li>make the list infinite and loop around (carousel style)</li></ul><p>The first one can be done either by simply setting <code>keyNavigationWraps: true</code> for a ListView (and other Views) or using the API's default index increase/decrease functions. In our case though, the carousel option would look the best.</p><p>I won't lie, making a carousel-like looping list is annoying and overly complex for this use case; the situation might improve later by creating some easier-to-use custom types in Pegasus.</p><h3 id=vertically>Vertically</h3><p>So the problem is, ListView can't do carousels: the only type that can is PathView. As such, we'll turn our ListViews into PathViews next. Again, let's start with the vertical axis; here's a before-after comparison, with some comments after the code:</p><p><strong>Before</strong></p><div class=codehilite><pre><span></span><span class=nx>ListView</span> <span class=p>{</span>
    <span class=kd>id: collectionAxis</span>

    <span class=k>anchors.left:</span> <span class=nx>parent</span><span class=p>.</span><span class=nx>left</span>
    <span class=k>anchors.right:</span> <span class=nx>parent</span><span class=p>.</span><span class=nx>right</span>
    <span class=k>anchors.top:</span> <span class=nx>parent</span><span class=p>.</span><span class=nx>verticalCenter</span>
    <span class=k>anchors.bottom:</span> <span class=nx>parent</span><span class=p>.</span><span class=nx>bottom</span>

    <span class=k>model:</span> <span class=nx>api</span><span class=p>.</span><span class=nx>collectionList</span><span class=p>.</span><span class=nx>model</span>
    <span class=k>currentIndex:</span> <span class=nx>api</span><span class=p>.</span><span class=nx>collectionList</span><span class=p>.</span><span class=nx>index</span>
    <span class=k>delegate:</span> <span class=nx>collectionAxisDelegate</span>

    <span class=k>snapMode:</span> <span class=nx>ListView</span><span class=p>.</span><span class=nx>SnapOneItem</span>
    <span class=k>highlightRangeMode:</span> <span class=nx>ListView</span><span class=p>.</span><span class=nx>StrictlyEnforceRange</span>
    <span class=k>clip:</span> <span class=kc>true</span>

    <span class=k>focus:</span> <span class=kc>true</span>
    <span class=k>Keys.onLeftPressed:</span> <span class=nx>currentItem</span><span class=p>.</span><span class=nx>axis</span><span class=p>.</span><span class=nx>decrementCurrentIndex</span><span class=p>()</span>
    <span class=k>Keys.onRightPressed:</span> <span class=nx>currentItem</span><span class=p>.</span><span class=nx>axis</span><span class=p>.</span><span class=nx>incrementCurrentIndex</span><span class=p>()</span>
    <span class=k>Keys.onPressed:</span> <span class=p>{</span>
        <span class=k>if</span> <span class=p>(</span><span class=nx>api</span><span class=p>.</span><span class=nx>keys</span><span class=p>.</span><span class=nx>isAccept</span><span class=p>(</span><span class=nx>event</span><span class=p>))</span>
            <span class=nx>currentItem</span><span class=p>.</span><span class=nx>axis</span><span class=p>.</span><span class=nx>currentGame</span><span class=p>.</span><span class=nx>launch</span><span class=p>();</span>
    <span class=p>}</span>
<span class=p>}</span>
</pre></div><p><strong>After</strong></p><div class=codehilite><pre><span></span><span class=nx>PathView</span> <span class=p>{</span>
    <span class=kd>id: collectionAxis</span>

    <span class=k>anchors.left:</span> <span class=nx>parent</span><span class=p>.</span><span class=nx>left</span>
    <span class=k>anchors.right:</span> <span class=nx>parent</span><span class=p>.</span><span class=nx>right</span>
    <span class=k>anchors.top:</span> <span class=nx>parent</span><span class=p>.</span><span class=nx>verticalCenter</span>
    <span class=k>anchors.bottom:</span> <span class=nx>parent</span><span class=p>.</span><span class=nx>bottom</span>

    <span class=k>model:</span> <span class=nx>api</span><span class=p>.</span><span class=nx>collectionList</span><span class=p>.</span><span class=nx>model</span>
    <span class=k>currentIndex:</span> <span class=nx>api</span><span class=p>.</span><span class=nx>collectionList</span><span class=p>.</span><span class=nx>index</span>
    <span class=k>delegate:</span> <span class=nx>collectionAxisDelegate</span>


<span class=hll>    <span class=c1>// changed ListView to PathView</span>
</span>    <span class=k>snapMode:</span> <span class=nx>PathView</span><span class=p>.</span><span class=nx>SnapOneItem</span>
    <span class=k>highlightRangeMode:</span> <span class=nx>PathView</span><span class=p>.</span><span class=nx>StrictlyEnforceRange</span>
    <span class=k>clip:</span> <span class=kc>true</span>

<span class=hll>    <span class=c1>// brand new: path definitions</span>
</span>    <span class=k>pathItemCount:</span> <span class=mi>1</span> <span class=o>+</span> <span class=nb>Math</span><span class=p>.</span><span class=nx>ceil</span><span class=p>(</span><span class=nx>height</span> <span class=o>/</span> <span class=nx>vpx</span><span class=p>(</span><span class=mi>180</span><span class=p>))</span>
    <span class=k>path:</span> <span class=nx>Path</span> <span class=p>{</span>
        <span class=k>startX:</span> <span class=nx>collectionAxis</span><span class=p>.</span><span class=nx>width</span> <span class=o>*</span> <span class=mf>0.5</span>
        <span class=k>startY:</span> <span class=nx>vpx</span><span class=p>(</span><span class=mi>180</span><span class=p>)</span> <span class=o>*</span> <span class=o>-</span><span class=mf>0.5</span>
        <span class=nx>PathLine</span> <span class=p>{</span>
            <span class=k>x:</span> <span class=nx>collectionAxis</span><span class=p>.</span><span class=nx>path</span><span class=p>.</span><span class=nx>startX</span>
            <span class=k>y:</span> <span class=nx>collectionAxis</span><span class=p>.</span><span class=nx>path</span><span class=p>.</span><span class=nx>startY</span> <span class=o>+</span> <span class=nx>collectionAxis</span><span class=p>.</span><span class=nx>pathItemCount</span> <span class=o>*</span> <span class=nx>vpx</span><span class=p>(</span><span class=mi>180</span><span class=p>)</span>
        <span class=p>}</span>
    <span class=p>}</span>
    <span class=k>preferredHighlightBegin:</span> <span class=mi>1</span> <span class=o>/</span> <span class=nx>pathItemCount</span>
    <span class=k>preferredHighlightEnd:</span> <span class=nx>preferredHighlightBegin</span>


    <span class=k>focus:</span> <span class=kc>true</span>
<span class=hll>    <span class=c1>// added up/down navigation</span>
</span>    <span class=k>Keys.onUpPressed:</span> <span class=nx>decrementCurrentIndex</span><span class=p>()</span>
    <span class=k>Keys.onDownPressed:</span> <span class=nx>incrementCurrentIndex</span><span class=p>()</span>
    <span class=k>Keys.onLeftPressed:</span> <span class=nx>currentItem</span><span class=p>.</span><span class=nx>axis</span><span class=p>.</span><span class=nx>decrementCurrentIndex</span><span class=p>()</span>
    <span class=k>Keys.onRightPressed:</span> <span class=nx>currentItem</span><span class=p>.</span><span class=nx>axis</span><span class=p>.</span><span class=nx>incrementCurrentIndex</span><span class=p>()</span>
    <span class=k>Keys.onPressed:</span> <span class=p>{</span>
        <span class=k>if</span> <span class=p>(</span><span class=nx>api</span><span class=p>.</span><span class=nx>keys</span><span class=p>.</span><span class=nx>isAccept</span><span class=p>(</span><span class=nx>event</span><span class=p>))</span>
            <span class=nx>currentItem</span><span class=p>.</span><span class=nx>axis</span><span class=p>.</span><span class=nx>currentGame</span><span class=p>.</span><span class=nx>launch</span><span class=p>();</span>
    <span class=p>}</span>
<span class=p>}</span>
</pre></div><div class="admonition warning"><p class=admonition-title>Warning</p><p>Don't forget to change ListView to PathView in the delegate (<code>collectionAxisDelegate</code>'s <code>width</code> prop) too!</p></div><video autoplay loop style="max-width:100%;display:block;margin:0 auto"><source src=../webm/flixnet_pathview.webm type=video/webm></video><p><em>Structure of the vertical PathView. The red line marks the path, with red dots at positions 0/4 (top), 1/4, 2/4, 3/4 and 4/4 (bottom). The centers of the delegates are marked with blue.</em></p><p>Unlike ListView that goes to one direction only, PathView can be used to create arbitrary paths on which the items will travel (curves, circles, all kinds of shapes). Because of that, some properties have to be provided in percentage or need manual calculations.</p><ul><li><p>For PathViews, <code>pathItemCount</code> must be set (the default behaviour is to show all items). We should show as many rows as it fits into lower half or the screen (one row's height is 180px). The number of visible items thus will be [area height] / [row height], which I've rounded up using <code>Math.ceil</code>, a standard JavaScript function. However, when there's a scrolling going on, there'll be actually <strong>one more</strong> row visible on the screen: the topmost row will gradually go <em>out</em> on the top of the lower area, while a new line is on its way <em>in</em> to appear on the bottom (see the animation below).</p></li><li><p>The <code>path</code> defines the trail the elements will follow <strong>by their center point</strong>. Because there'll be one item that slides <em>out</em>, and one that slides <em>in</em>, the path extends above and below the PathView's area. The starting point of the axis (the center point of the item that will slide out) is horizontally (<code>startX</code>) the center of the screen (as the rows fill the width), and vertically (<code>startY</code>) above the top edge of the PathView (which would be 0) by 50% of the row height (where values are in pixels). From the start point, a linear path is created with <code>PathLine</code>: I've set it so the end point is the same as the start except the <code>Y</code> coordinate, which is increased by the length ot the path, [number of max. visible items] * [item height].</p></li><li><p>The preferred highlight positions are in <strong>percentage</strong> for the PathView (as it can have any kind of shape, pixels don't always make sense). Again, the values define the range for the <em>center point</em> of the selected item. It defaults to 0 (start of the line), which in our case would be the center of the sliding out element, out of the visible area. I've set it to [1] / [item count], which will produce the center point of the <em>second</em> element on the path. Since I'm not planning to add any additional effects and such, just select one item, I've set the end of the range to the same as the beginning.</p></li><li><p>Because Paths are not necessary straight, it can't be decided automatically which direction are logical to move in, so there's no built-in key navigation. In our case we're just moving vertically, so I've made the View react to the "up" and "down" keys.</p></li></ul><h3 id=horizontally>Horizontally</h3><p>The horizontal scrolling works similarly, with one important difference: there is a margin on the left of the currently selected item, where the previous one is halfway in the screen. We'll have to shift the whole path horizontally, and add 1 to the maximum number of visible items, and another one to account for scrolling, just like at the vertical axis.</p><video autoplay loop style="max-width:100%;display:block;margin:0 auto"><source src=../webm/flixnet_pathview2.webm type=video/webm></video><p>I've set the left margin previously to 100 px and the width of a game box to be 240x135. In addition, there's a 10px spacing between the elements, giving the full width of a box to 250. The center of the current-item would be at 100 + 250/2 = 225 on the path, but to make it align with the collection label, I'll shift it 5px (half of the spacing) to the left, making the X center to be 220px. Then counting backwards, the previous-item will be at 220 - 250, and the one before that (the leftmost postion, where the new elements will appear when scrolling) at 220 - 250 * 2.</p><p>All right, let's change the horizontal ListView into a PathView:</p><p><strong>Before</strong>:</p><div class=codehilite><pre><span></span><span class=nx>ListView</span> <span class=p>{</span>
    <span class=kd>id: gameAxis</span>

    <span class=k>anchors.left:</span> <span class=nx>parent</span><span class=p>.</span><span class=nx>left</span>
    <span class=k>anchors.right:</span> <span class=nx>parent</span><span class=p>.</span><span class=nx>right</span>
    <span class=k>anchors.top:</span> <span class=nx>label</span><span class=p>.</span><span class=nx>bottom</span>
    <span class=k>anchors.bottom:</span> <span class=nx>parent</span><span class=p>.</span><span class=nx>bottom</span>

    <span class=k>orientation:</span> <span class=nx>ListView</span><span class=p>.</span><span class=nx>Horizontal</span>

    <span class=k>model:</span> <span class=nx>modelData</span><span class=p>.</span><span class=nx>gameList</span><span class=p>.</span><span class=nx>model</span>
    <span class=k>currentIndex:</span> <span class=nx>modelData</span><span class=p>.</span><span class=nx>gameList</span><span class=p>.</span><span class=nx>index</span>
    <span class=k>delegate:</span> <span class=nx>gameAxisDelegate</span>
    <span class=k>spacing:</span> <span class=nx>vpx</span><span class=p>(</span><span class=mi>10</span><span class=p>)</span>

    <span class=k>snapMode:</span> <span class=nx>ListView</span><span class=p>.</span><span class=nx>SnapOneItem</span>
    <span class=k>highlightRangeMode:</span> <span class=nx>ListView</span><span class=p>.</span><span class=nx>StrictlyEnforceRange</span>

    <span class=k>preferredHighlightBegin:</span> <span class=nx>vpx</span><span class=p>(</span><span class=mi>100</span><span class=p>)</span>
    <span class=k>preferredHighlightEnd:</span> <span class=nx>preferredHighlightBegin</span> <span class=o>+</span> <span class=nx>vpx</span><span class=p>(</span><span class=mi>240</span><span class=p>)</span>
<span class=p>}</span>
</pre></div><p><strong>After</strong>:</p><div class=codehilite><pre><span></span><span class=nx>PathView</span> <span class=p>{</span>
    <span class=kd>id: gameAxis</span>

    <span class=k>anchors.left:</span> <span class=nx>parent</span><span class=p>.</span><span class=nx>left</span>
    <span class=k>anchors.right:</span> <span class=nx>parent</span><span class=p>.</span><span class=nx>right</span>
    <span class=k>anchors.top:</span> <span class=nx>label</span><span class=p>.</span><span class=nx>bottom</span>
    <span class=k>anchors.bottom:</span> <span class=nx>parent</span><span class=p>.</span><span class=nx>bottom</span>

<span class=hll>    <span class=c1>// removed orientation</span>
</span>
<span class=hll>    <span class=c1>// removed spacing</span>
</span>    <span class=k>model:</span> <span class=nx>modelData</span><span class=p>.</span><span class=nx>gameList</span><span class=p>.</span><span class=nx>model</span>
    <span class=k>currentIndex:</span> <span class=nx>modelData</span><span class=p>.</span><span class=nx>gameList</span><span class=p>.</span><span class=nx>index</span>
    <span class=k>delegate:</span> <span class=nx>gameAxisDelegate</span>

<span class=hll>    <span class=c1>// changed ListView to PathView</span>
</span>    <span class=k>snapMode:</span> <span class=nx>PathView</span><span class=p>.</span><span class=nx>SnapOneItem</span>
    <span class=k>highlightRangeMode:</span> <span class=nx>PathView</span><span class=p>.</span><span class=nx>StrictlyEnforceRange</span>


<span class=hll>    <span class=c1>// brand new: path definitions</span>
</span>    <span class=k>pathItemCount:</span> <span class=mi>2</span> <span class=o>+</span> <span class=nb>Math</span><span class=p>.</span><span class=nx>ceil</span><span class=p>(</span><span class=nx>width</span> <span class=o>/</span> <span class=nx>vpx</span><span class=p>(</span><span class=mi>250</span><span class=p>))</span> <span class=c1>// note the &#39;2&#39;!</span>
    <span class=k>path:</span> <span class=nx>Path</span> <span class=p>{</span>
        <span class=k>startX:</span> <span class=nx>vpx</span><span class=p>(</span><span class=mi>220</span><span class=p>)</span> <span class=o>-</span> <span class=nx>vpx</span><span class=p>(</span><span class=mi>250</span><span class=p>)</span> <span class=o>*</span> <span class=mi>2</span>
        <span class=k>startY:</span> <span class=nx>vpx</span><span class=p>(</span><span class=mi>135</span><span class=p>)</span> <span class=o>*</span> <span class=mf>0.5</span>
        <span class=nx>PathLine</span> <span class=p>{</span>
            <span class=k>x:</span> <span class=nx>gameAxis</span><span class=p>.</span><span class=nx>path</span><span class=p>.</span><span class=nx>startX</span> <span class=o>+</span> <span class=nx>gameAxis</span><span class=p>.</span><span class=nx>pathItemCount</span> <span class=o>*</span> <span class=nx>vpx</span><span class=p>(</span><span class=mi>250</span><span class=p>)</span>
            <span class=k>y:</span> <span class=nx>gameAxis</span><span class=p>.</span><span class=nx>path</span><span class=p>.</span><span class=nx>startY</span>
        <span class=p>}</span>
    <span class=p>}</span>
<span class=hll>    <span class=c1>// changed highlight range</span>
</span>    <span class=k>preferredHighlightBegin:</span> <span class=mi>2</span> <span class=o>/</span> <span class=nx>pathItemCount</span>
    <span class=k>preferredHighlightEnd:</span> <span class=nx>preferredHighlightBegin</span>
<span class=p>}</span>
</pre></div><p>And now both the horizontal and vertical axis loops as intended!</p><div class="admonition tip"><p class=admonition-title>Tip</p><p>Typing out fixed values in pixels every time can be tedious and error prone. I'd recommend defining them as properties at the top of the object they're used in (eg. <code>property real boxHeight: vpx(135)</code>).</p></div></div></div><footer class="col-md-12 text-center"><hr><p><small>Copyright &copy; 2018-2019 M치ty치s Mustoha<br></small><small>Documentation built with <a href=http://www.mkdocs.org/ >MkDocs</a>.</small></p></footer><script src=//ajax.googleapis.com/ajax/libs/jquery/1.12.4/jquery.min.js></script><script src=../../js/bootstrap-3.0.3.min.js></script><script src=../../js/highlight.pack.js></script><script>hljs.initHighlightingOnLoad();</script><script>var base_url = "../.."</script><script src=../../js/base.js></script><script src=../../search/main.js></script><div class=modal id=mkdocs_search_modal tabindex=-1 role=dialog aria-labelledby=searchModalLabel aria-hidden=true><div class="modal-dialog modal-lg"><div class=modal-content><div class=modal-header><button type=button class=close data-dismiss=modal><span aria-hidden=true>&times;</span> <span class=sr-only>Close</span></button><h4 class=modal-title id=searchModalLabel>Search</h4></div><div class=modal-body><p>From here you can search these documents. Enter your search terms below.</p><form><div class=form-group><input class=form-control placeholder=Search... id=mkdocs-search-query title="Type search term here"></div></form><div id=mkdocs-search-results></div></div><div class=modal-footer></div></div></div></div><div class=modal id=mkdocs_keyboard_modal tabindex=-1 role=dialog aria-labelledby=keyboardModalLabel aria-hidden=true><div class=modal-dialog><div class=modal-content><div class=modal-header><h4 class=modal-title id=keyboardModalLabel>Keyboard Shortcuts</h4><button type=button class=close data-dismiss=modal><span aria-hidden=true>&times;</span><span class=sr-only>Close</span></button></div><div class=modal-body><table class=table><thead><tr><th style="width: 20%;">Keys</th><th>Action</th></tr></thead><tbody><tr><td class="help shortcut"><kbd>?</kbd></td><td>Open this help</td></tr><tr><td class="next shortcut"><kbd>n</kbd></td><td>Next page</td></tr><tr><td class="prev shortcut"><kbd>p</kbd></td><td>Previous page</td></tr><tr><td class="search shortcut"><kbd>s</kbd></td><td>Search</td></tr></tbody></table></div><div class=modal-footer></div></div></div></div></body></html>