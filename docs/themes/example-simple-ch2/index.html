<!DOCTYPE html><html lang=en><head><script async src="https://www.googletagmanager.com/gtag/js?id=G-KQLQN0DTLR"></script><script>window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments);}gtag('js',new Date());gtag('config','G-KQLQN0DTLR');</script><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="Documentation and customization guides for the Pegasus frontend."><meta name=author content="Mátyás Mustoha"><link rel=canonical href=http://www.pegasus-frontend.org/docs/themes/example-simple-ch2/ ><link rel="shortcut icon" href=../../img/favicon.ico><title>Part 2 - Pegasus Docs</title><link rel=stylesheet href=https://use.fontawesome.com/releases/v5.12.0/css/all.css><link rel=stylesheet href=https://use.fontawesome.com/releases/v5.12.0/css/v4-shims.css><link rel=stylesheet href=//cdn.jsdelivr.net/npm/hack-font@3.3.0/build/web/hack.min.css><link href="//fonts.googleapis.com/css?family=PT+Sans:400,400italic,700,700italic&subset=latin-ext,latin" rel=stylesheet><link href="//fonts.googleapis.com/css?family=Open+Sans:300italic,400italic,700italic,400,300,600,700&subset=latin-ext,latin" rel=stylesheet><link href=../../css/bootstrap-custom.min.css rel=stylesheet><link href=../../css/base.min.css rel=stylesheet><link href=../../css/cinder.min.css rel=stylesheet><link href=../../css/extra.css rel=stylesheet><link href=../../css/codehl.css rel=stylesheet><link href="//fonts.googleapis.com/icon?family=Material+Icons" rel=stylesheet><!--[if lt IE 9]>
            <script src="https://cdn.jsdelivr.net/npm/html5shiv@3.7.3/dist/html5shiv.min.js"></script>
            <script src="https://cdn.jsdelivr.net/npm/respond.js@1.4.2/dest/respond.min.js"></script>
        <![endif]--></head><body><div class="navbar navbar-default navbar-fixed-top" role=navigation><div class=container><div class=navbar-header><button type=button class=navbar-toggle data-toggle=collapse data-target=.navbar-collapse><span class=sr-only>Toggle navigation</span> <span class=icon-bar></span> <span class=icon-bar></span> <span class=icon-bar></span></button> <a class=navbar-brand href=../..>Pegasus Docs</a></div><div class="navbar-collapse collapse"><ul class="nav navbar-nav"><li><a href=../..>Home</a></li><li class=dropdown><a href=# class=dropdown-toggle data-toggle=dropdown>User Guide <b class=caret></b></a><ul class=dropdown-menu><li class=dropdown-submenu><a tabindex=-1 href="">Setup</a><ul class=dropdown-menu><li><a href=../../user-guide/getting-started/ >Getting started</a></li><li><a href=../../user-guide/controls/ >Default controls</a></li><li><a href=../../user-guide/portable/ >Portable mode</a></li><li><a href=../../user-guide/config-dirs/ >Config directories</a></li></ul></li><li class=dropdown-submenu><a tabindex=-1 href="">Platform notes</a><ul class=dropdown-menu><li><a href=../../user-guide/platform-windows/ >Windows</a></li><li><a href=../../user-guide/platform-android/ >Android</a></li><li><a href=../../user-guide/platform-android-example/ >Android example</a></li><li><a href=../../user-guide/platform-linux/ >Linux</a></li><li><a href=../../user-guide/platform-raspberry/ >Raspberry Pi</a></li><li><a href=../../user-guide/platform-macos/ >MacOS</a></li></ul></li><li class=dropdown-submenu><a tabindex=-1 href="">Adding games</a><ul class=dropdown-menu><li><a href=../../user-guide/adding-games/ >How to add games</a></li><li><a href=../../user-guide/meta-files/ >Metadata files</a></li><li><a href=../../user-guide/meta-assets/ >Asset files</a></li><li><a href=../../user-guide/meta-sources/ >Other sources</a></li></ul></li><li><a href=../../user-guide/faq/ >FAQ</a></li><li><a href=../../user-guide/installing-themes/ >Installing themes</a></li><li><a href=../../user-guide/scripting/ >Scripting</a></li><li><a href=../../user-guide/breaking-changes/ >Breaking changes</a></li></ul></li><li class="dropdown active"><a href=# class=dropdown-toggle data-toggle=dropdown>Theme Dev <b class=caret></b></a><ul class=dropdown-menu><li><a href=../overview/ >Overview</a></li><li><a href=../extra/ >Special features</a></li><li><a href=../qml-tutorials/ >QML tutorials</a></li><li><a href=../qml-modules/ >QML modules</a></li><li class=dropdown-submenu><a tabindex=-1 href="">Step-by-step: Simple theme</a><ul class=dropdown-menu><li><a href=../example-simple-intro/ >Introduction</a></li><li><a href=../example-simple-ch1/ >Part 1</a></li><li class=active><a href=./ >Part 2</a></li><li><a href=../example-simple-ch3/ >Part 3</a></li></ul></li><li class=dropdown-submenu><a tabindex=-1 href="">Step-by-step: Flixnet theme</a><ul class=dropdown-menu><li><a href=../example-flixnet-intro/ >Introduction</a></li><li><a href=../example-flixnet-ch1/ >Part 1</a></li><li><a href=../example-flixnet-ch2/ >Part 2</a></li><li><a href=../example-flixnet-ch3/ >Part 3</a></li><li><a href=../example-flixnet-ch4/ >Part 4</a></li><li><a href=../example-flixnet-ch5/ >Part 5</a></li></ul></li><li><a href=../api/ >API reference</a></li></ul></li><li class=dropdown><a href=# class=dropdown-toggle data-toggle=dropdown>Core Dev <b class=caret></b></a><ul class=dropdown-menu><li><a href=../../dev/translate/ >Translations</a></li><li><a href=../../dev/meta-syntax/ >Metadata syntax</a></li><li><a href=../../dev/build/ >Building</a></li><li><a href=../../dev/install-qt/ >Installing Qt</a></li><li><a href=../../dev/cross-compile-qt/ >Cross compiling Qt</a></li><li><a href=../../dev/deploy/ >Deployment</a></li></ul></li></ul><ul class="nav navbar-nav navbar-right"><li><a href=# data-toggle=modal data-target=#mkdocs_search_modal><i class="fas fa-search"></i> Search</a></li><li><a rel=prev href=../example-simple-ch1/ ><i class="fas fa-arrow-left"></i> Previous</a></li><li><a rel=next href=../example-simple-ch3/ >Next <i class="fas fa-arrow-right"></i></a></li></ul></div></div></div><div class=container><div class=col-md-3><div class="bs-sidebar hidden-print affix well" role=complementary><ul class="nav bs-sidenav"><li class="first-level active"><a href=#simple-theme-part-2-collections-and-the-game-list>Simple theme, Part 2: Collections and the game list</a></li><li class=second-level><a href=#left-panel>Left panel</a></li><li class=third-level><a href=#the-current-collection>The current collection</a></li><li class=third-level><a href=#collection-logo>Collection logo</a></li><li class=third-level><a href=#changing-collections>Changing collections</a></li><li class=third-level><a href=#game-list>Game list</a></li><li class=third-level><a href=#launching-games>Launching games</a></li><li class=third-level><a href=#tweaks>Tweaks</a></li></ul></div></div><div class=col-md-9 role=main><h1 id=simple-theme-part-2-collections-and-the-game-list>Simple theme, Part 2: Collections and the game list</h1><h2 id=left-panel>Left panel</h2><p>Let's continue with the menu panel, as this will be the more complex part of the theme.</p><p>I'd like to add a 50px padding around the contents of the left panel. But the players have all kinds of screens and devices, with larger or smaller resolutions -- how can I define it in a resolution-independent way?</p><p>You can define values using percentages, like we did with the width earlier, but for cases where more precision is desired, the <code>vpx</code> function might be of use. These virtual pixel values will automatically scale up or down depending on the screen resolution: a <code>vpx(60)</code> value will turn into 60px on a 720p screen, 90 real pixels on 1080p and 40 on 480p, while keeping the aspect ratio. Combining them with anchors and regular percentages, you can define and position elements in a quite detailed way.</p><p>So, I want to add a 50px padding for the items -- and by this, I mean a padding that will be 50px on a screen with 1280x720 resolution, and scale up or down for other sizes. For later use, I'll store the amount of the remaining "content width" in a property:</p><div class=codehilite><pre><span></span><code><span class=nx>Rectangle</span> <span class=p>{</span>
    <span class=kd>id: menu</span>

<span class=hll>    <span class=nx>property</span> <span class=nx>real</span> <span class=k>contentWidth:</span> <span class=nx>width</span> <span class=o>-</span> <span class=nx>vpx</span><span class=p>(</span><span class=mi>100</span><span class=p>)</span>
</span>
    <span class=k>color:</span> <span class=s2>&quot;#555&quot;</span>

    <span class=k>width:</span> <span class=nx>parent</span><span class=p>.</span><span class=nx>width</span> <span class=o>*</span> <span class=mf>0.3</span>
    <span class=k>anchors.top:</span> <span class=nx>parent</span><span class=p>.</span><span class=nx>top</span>
    <span class=k>anchors.bottom:</span> <span class=nx>parent</span><span class=p>.</span><span class=nx>bottom</span>
<span class=p>}</span>
</code></pre></div><h3 id=the-current-collection>The current collection</h3><p>Pegasus provides access to the collections using <code>api.collections</code> (<a href=../api/#collections>reference</a>). This is a list of items, and we can access one item in it by the item's position ("index") (see the <a href=../api/#item-models><code>get</code> function</a>). Let's create a property for tracking the current collection. Just for testing, I'll set it to the very first collection item, then we'll implement collection changing later.</p><div class=codehilite><pre><span></span><code><span class=kr>import</span> <span class=nx>QtQuick</span> <span class=mf>2.0</span>

<span class=nx>FocusScope</span> <span class=p>{</span>

<span class=hll>    <span class=nx>property</span> <span class=kd>var</span> <span class=k>currentCollection:</span> <span class=nx>api</span><span class=p>.</span><span class=nx>collections</span><span class=p>.</span><span class=nx>get</span><span class=p>(</span><span class=mi>0</span><span class=p>)</span>
</span>
    <span class=c1>// ...</span>
<span class=p>}</span>
</code></pre></div><h3 id=collection-logo>Collection logo</h3><p>Lets add the collection's logo to the panel. First you'll need a bunch of game system logo images. I've borrowed them from EmulationStation (original: Nils Bonenberger, CC-BY-NC-SA), except the RetroPie logo (original: Florian Müller, CC-BY-NC-SA). You can get them <a href=https://github.com/mmatyas/pegasus-frontend/releases/download/alpha1/logos.zip>here</a>. The file names match the system names from EmulationStation. Simply create a new directory inside your theme's folder, eg. <code>assets</code>, and extract them there.</p><p>After that, I add an Image element inside the <code>menu</code> Rectangle:</p><div class=codehilite><pre><span></span><code><span class=nx>Rectangle</span> <span class=p>{</span>
    <span class=kd>id: menu</span>

    <span class=nx>property</span> <span class=nx>real</span> <span class=k>contentWidth:</span> <span class=nx>width</span> <span class=o>-</span> <span class=nx>vpx</span><span class=p>(</span><span class=mi>100</span><span class=p>)</span>

    <span class=k>color:</span> <span class=s2>&quot;#555&quot;</span>

    <span class=k>width:</span> <span class=nx>parent</span><span class=p>.</span><span class=nx>width</span> <span class=o>*</span> <span class=mf>0.3</span>
    <span class=k>anchors.top:</span> <span class=nx>parent</span><span class=p>.</span><span class=nx>top</span>
    <span class=k>anchors.bottom:</span> <span class=nx>parent</span><span class=p>.</span><span class=nx>bottom</span>

    <span class=nx>Image</span> <span class=p>{</span>
        <span class=kd>id: collectionLogo</span>

        <span class=k>width:</span> <span class=nx>parent</span><span class=p>.</span><span class=nx>contentWidth</span>
        <span class=k>height:</span> <span class=nx>vpx</span><span class=p>(</span><span class=mi>60</span><span class=p>)</span>

        <span class=k>fillMode:</span> <span class=nx>Image</span><span class=p>.</span><span class=nx>PreserveAspectFit</span>
        <span class=k>source:</span> <span class=s2>&quot;assets/&quot;</span> <span class=o>+</span> <span class=nx>currentCollection</span><span class=p>.</span><span class=nx>shortName</span> <span class=o>+</span> <span class=s2>&quot;.svg&quot;</span>
        <span class=k>asynchronous:</span> <span class=kc>true</span>

        <span class=k>anchors.horizontalCenter:</span> <span class=nx>parent</span><span class=p>.</span><span class=nx>horizontalCenter</span>
        <span class=k>anchors.top:</span> <span class=nx>parent</span><span class=p>.</span><span class=nx>top</span>
        <span class=k>anchors.topMargin:</span> <span class=nx>vpx</span><span class=p>(</span><span class=mi>50</span><span class=p>)</span>
    <span class=p>}</span>
<span class=p>}</span>
</code></pre></div><p>Some interesting things here:</p><ul><li><code>source</code> is the concatenation of three strings, <code>shortName</code> being the short name for a collection (eg. <code>nes</code>, <code>gba</code>, ...).</li><li><code>asynchronous</code> will load the image in the background. By default (<code>false</code>), the program will wait until the Image is fully loaded, but during this time it cannot respond to user input. Since images may take a long time to load depending on the device, asynchronous loading is preferred in most cases.</li></ul><h3 id=changing-collections>Changing collections</h3><p>Pressing left or right feels kind of natural to use for selecting the next/previous collection. I'll add a new property to track the index of the current collection, starting with <code>0</code> initially. Then I handle of the <span class=keys><kbd class=key-arrow-left>Left</kbd></span> and <span class=keys><kbd class=key-arrow-right>Right</kbd></span> keys at the top of the whole FocusScope; I have to make sure the index doesn't turn negative or go over the highest index (<code>count - 1</code>); when they would, I restart the counting from the other end, which will produce a looping effect. I can do this with some JavaScript logic:</p><div class=codehilite><pre><span></span><code><span class=kr>import</span> <span class=nx>QtQuick</span> <span class=mf>2.0</span>

<span class=nx>FocusScope</span> <span class=p>{</span>

<span class=hll>    <span class=nx>property</span> <span class=kr>int</span> <span class=k>currentCollectionIndex:</span> <span class=mi>0</span>
</span>    <span class=nx>property</span> <span class=kd>var</span> <span class=k>currentCollection:</span> <span class=nx>api</span><span class=p>.</span><span class=nx>collections</span><span class=p>.</span><span class=nx>get</span><span class=p>(</span><span class=nx>currentCollectionIndex</span><span class=p>)</span>

<span class=hll>    <span class=c1>// decrease (and possibly loop) the collection index</span>
</span>    <span class=k>Keys.onLeftPressed:</span> <span class=p>{</span>
        <span class=k>if</span> <span class=p>(</span><span class=nx>currentCollectionIndex</span> <span class=o>&lt;=</span> <span class=mi>0</span><span class=p>)</span>
            <span class=nx>currentCollectionIndex</span> <span class=o>=</span> <span class=nx>api</span><span class=p>.</span><span class=nx>collections</span><span class=p>.</span><span class=nx>count</span> <span class=o>-</span> <span class=mi>1</span><span class=p>;</span>
        <span class=k>else</span>
            <span class=nx>currentCollectionIndex</span><span class=o>--</span><span class=p>;</span>
    <span class=p>}</span>

<span class=hll>    <span class=c1>// increase (and possibly loop) the collection index</span>
</span>    <span class=k>Keys.onRightPressed:</span> <span class=p>{</span>
        <span class=k>if</span> <span class=p>(</span><span class=nx>currentCollectionIndex</span> <span class=o>&gt;=</span> <span class=nx>api</span><span class=p>.</span><span class=nx>collections</span><span class=p>.</span><span class=nx>count</span> <span class=o>-</span> <span class=mi>1</span><span class=p>)</span>
            <span class=nx>currentCollectionIndex</span> <span class=o>=</span> <span class=mi>0</span><span class=p>;</span>
        <span class=k>else</span>
            <span class=nx>currentCollectionIndex</span><span class=o>++</span><span class=p>;</span>
    <span class=p>}</span>


    <span class=nx>Rectangle</span> <span class=p>{</span>
        <span class=c1>// ...</span>
    <span class=p>}</span>

    <span class=nx>Rectangle</span> <span class=p>{</span>
        <span class=c1>// ...</span>
    <span class=p>}</span>
<span class=p>}</span>
</code></pre></div><p>After a refresh, pressing <span class=keys><kbd class=key-arrow-left>Left</kbd></span> and <span class=keys><kbd class=key-arrow-right>Right</kbd></span> should now change the logo on the screen. Yay!</p><div class="admonition note"><p class=admonition-title>Note</p><p>Assuming you have more than one collection, of course.</p></div><div class="admonition tip"><p class=admonition-title>Tip</p><p>Handling keyboard keys also enables gamepad navigation. See the <a href=../user-guide/controls>controls</a> page about how keys and buttons are related.</p></div><div class="admonition tip"><p class=admonition-title>Tip</p><p>Often there are more than one way to solve problems. Instead of manually handling the collection index, I could have used a ListView. We do that in the <a href=../example-flixnet-intro/ >Flixnet tutorial</a>, and also for the game list.</p></div><h3 id=game-list>Game list</h3><p>This is going to be actually the most complex piece of the theme. The games for the currently selected collection can be accessed through <code>currentCollection.games</code>, which is, similarly to the collections, a list containing games. This time we'll use a ListView that will create the menu entries and handle the index for us.</p><p>Returning to the <code>menu</code> Rectangle, I add a ListView after the logo, first setting just the dimensions:</p><div class=codehilite><pre><span></span><code><span class=nx>Rectangle</span> <span class=p>{</span>
    <span class=kd>id: menu</span>

    <span class=c1>// ...</span>

    <span class=nx>Image</span> <span class=p>{</span> <span class=cm>/* ... */</span> <span class=p>}</span>


    <span class=nx>ListView</span> <span class=p>{</span>
        <span class=kd>id: gameView</span>

        <span class=k>width:</span> <span class=nx>parent</span><span class=p>.</span><span class=nx>contentWidth</span>
        <span class=k>anchors.horizontalCenter:</span> <span class=nx>parent</span><span class=p>.</span><span class=nx>horizontalCenter</span>
        <span class=k>anchors.top:</span> <span class=nx>collectionLogo</span><span class=p>.</span><span class=nx>bottom</span>
        <span class=k>anchors.bottom:</span> <span class=nx>parent</span><span class=p>.</span><span class=nx>bottom</span>
        <span class=k>anchors.margins:</span> <span class=nx>vpx</span><span class=p>(</span><span class=mi>50</span><span class=p>)</span>

        <span class=k>focus:</span> <span class=kc>true</span>
    <span class=p>}</span>
<span class=p>}</span>
</code></pre></div><p>Now to actually see something, ListView needs a Model: a list of items, and a Delegate: the definition of how one item should look like on the screen.</p><p>Our model will be the games of the currently selected collection, and for every game, the visual representation will be a text item:</p><div class=codehilite><pre><span></span><code><span class=nx>ListView</span> <span class=p>{</span>
    <span class=kd>id: gameView</span>

    <span class=k>model:</span> <span class=nx>currentCollection</span><span class=p>.</span><span class=nx>games</span>
    <span class=k>delegate:</span> <span class=nx>Text</span> <span class=p>{</span>
        <span class=k>text:</span> <span class=nx>modelData</span><span class=p>.</span><span class=nx>title</span>
    <span class=p>}</span>

    <span class=c1>// anchors, etc.</span>
<span class=p>}</span>
</code></pre></div><p>You should now see the list of games, changing with the selected collection on pressing <span class=keys><kbd class=key-arrow-left>Left</kbd></span>/<span class=keys><kbd class=key-arrow-right>Right</kbd></span>.</p><div class="admonition note"><p class=admonition-title>Note</p><p><code>games</code> is a list of Game objects. <code>modelData</code> in the delegate will be one Game object of the Model.</p></div><p>I'll do a quick reorganization in the code:</p><ul><li>I move the Delegate definition to a separate object to make the code cleaner</li></ul><div class=codehilite><pre><span></span><code><span class=nx>Rectangle</span> <span class=p>{</span>
    <span class=kd>id: menu</span>

    <span class=c1>// ...</span>

    <span class=nx>Image</span> <span class=p>{</span> <span class=cm>/* ... */</span> <span class=p>}</span>


    <span class=nx>ListView</span> <span class=p>{</span>
        <span class=kd>id: gameView</span>

<span class=hll>        <span class=k>model:</span> <span class=nx>currentCollection</span><span class=p>.</span><span class=nx>games</span>
</span>        <span class=k>delegate:</span> <span class=nx>gameViewDelegate</span>

        <span class=k>width:</span> <span class=nx>parent</span><span class=p>.</span><span class=nx>contentWidth</span>
        <span class=k>anchors.horizontalCenter:</span> <span class=nx>parent</span><span class=p>.</span><span class=nx>horizontalCenter</span>
        <span class=k>anchors.top:</span> <span class=nx>collectionLogo</span><span class=p>.</span><span class=nx>bottom</span>
        <span class=k>anchors.bottom:</span> <span class=nx>parent</span><span class=p>.</span><span class=nx>bottom</span>
        <span class=k>anchors.margins:</span> <span class=nx>vpx</span><span class=p>(</span><span class=mi>50</span><span class=p>)</span>

        <span class=k>focus:</span> <span class=kc>true</span>
    <span class=p>}</span>
<span class=hll>
</span>    <span class=nx>Component</span> <span class=p>{</span>
        <span class=kd>id: gameViewDelegate</span>

        <span class=nx>Text</span> <span class=p>{</span>
            <span class=k>text:</span> <span class=nx>modelData</span><span class=p>.</span><span class=nx>title</span>
        <span class=p>}</span>
    <span class=p>}</span>
<span class=p>}</span>
</code></pre></div><div class="admonition tip"><p class=admonition-title>Tip</p><p>Component is a special element that defines a QML document. Just as QML files can have only one root element, Components can have only one child. You could actually move the <code>Text</code> to a separate file (eg. <code>GameListItem.qml</code>) and use the file's name to set the delegate (eg. <code>delegate: GameListItem { }</code>).</p></div><p>Let's continue with tweaking the menu items:</p><div class=codehilite><pre><span></span><code><span class=nx>Component</span> <span class=p>{</span>
    <span class=kd>id: gameViewDelegate</span>

    <span class=nx>Text</span> <span class=p>{</span>
        <span class=k>text:</span> <span class=nx>modelData</span><span class=p>.</span><span class=nx>title</span>

        <span class=c1>// white, 20px, condensed font</span>
        <span class=k>color:</span> <span class=s2>&quot;white&quot;</span>
        <span class=k>font.family:</span> <span class=nx>globalFonts</span><span class=p>.</span><span class=nx>condensed</span>
        <span class=k>font.pixelSize:</span> <span class=nx>vpx</span><span class=p>(</span><span class=mi>20</span><span class=p>)</span>

        <span class=c1>// the size of the whole text box,</span>
        <span class=c1>// a bit taller than the text size for a nice padding</span>
        <span class=k>width:</span> <span class=nx>ListView</span><span class=p>.</span><span class=nx>view</span><span class=p>.</span><span class=nx>width</span>
        <span class=k>height:</span> <span class=nx>vpx</span><span class=p>(</span><span class=mi>36</span><span class=p>)</span>
        <span class=c1>// align the text vertically in the middle of the text area</span>
        <span class=k>verticalAlignment:</span> <span class=nx>Text</span><span class=p>.</span><span class=nx>AlignVCenter</span>
        <span class=c1>// if the text is too long, end it with ellipsis (three dots)</span>
        <span class=k>elide:</span> <span class=nx>Text</span><span class=p>.</span><span class=nx>ElideRight</span>
    <span class=p>}</span>
<span class=p>}</span>
</code></pre></div><p>This is how it should look like:</p><p><img alt=screenshot src=../img/simple_left-menu-1.png></p><p>To see which one of the menu items is the selected one, I'll change its color and make it bigger and bold:</p><div class=codehilite><pre><span></span><code><span class=nx>Component</span> <span class=p>{</span>
    <span class=kd>id: gameViewDelegate</span>

    <span class=nx>Text</span> <span class=p>{</span>
        <span class=k>text:</span> <span class=nx>modelData</span><span class=p>.</span><span class=nx>title</span>

        <span class=c1>// orange if this item is the currently selected one, white otherwise</span>
<span class=hll>        <span class=k>color:</span> <span class=nx>ListView</span><span class=p>.</span><span class=nx>isCurrentItem</span> <span class=o>?</span> <span class=s2>&quot;orange&quot;</span> <span class=o>:</span> <span class=s2>&quot;white&quot;</span>
</span>        <span class=k>font.family:</span> <span class=nx>globalFonts</span><span class=p>.</span><span class=nx>condensed</span>
        <span class=c1>// bigger if selected</span>
<span class=hll>        <span class=k>font.pixelSize:</span> <span class=nx>ListView</span><span class=p>.</span><span class=nx>isCurrentItem</span> <span class=o>?</span> <span class=nx>vpx</span><span class=p>(</span><span class=mi>24</span><span class=p>)</span> <span class=o>:</span> <span class=nx>vpx</span><span class=p>(</span><span class=mi>20</span><span class=p>)</span>
</span>        <span class=c1>// bold if selected (hint: isCurrentItem is already a true/false value)</span>
<span class=hll>        <span class=k>font.bold:</span> <span class=nx>ListView</span><span class=p>.</span><span class=nx>isCurrentItem</span>
</span>
        <span class=k>width:</span> <span class=nx>ListView</span><span class=p>.</span><span class=nx>view</span><span class=p>.</span><span class=nx>width</span>
        <span class=k>height:</span> <span class=nx>vpx</span><span class=p>(</span><span class=mi>36</span><span class=p>)</span>
        <span class=k>verticalAlignment:</span> <span class=nx>Text</span><span class=p>.</span><span class=nx>AlignVCenter</span>
        <span class=k>elide:</span> <span class=nx>Text</span><span class=p>.</span><span class=nx>ElideRight</span>
    <span class=p>}</span>
<span class=p>}</span>
</code></pre></div><div class="admonition help"><p class=admonition-title>Help</p><p>When setting values, the <code>X ? A : B</code> form is called "inline-if": if the condition <code>X</code> is true, <code>A</code> will be used, otherwise <code>B</code>. In our case, it would equal to the following JavaScript code:</p><div class=codehilite><pre><span></span><code><span class=k>if</span><span class=w> </span><span class=p>(</span><span class=nx>ListView</span><span class=p>.</span><span class=nx>isCurrentItem</span><span class=p>)</span>
<span class=w>    </span><span class=k>return</span><span class=w> </span><span class=s2>&quot;orange&quot;</span>
<span class=k>else</span>
<span class=w>    </span><span class=k>return</span><span class=w> </span><span class=s2>&quot;white&quot;</span>
</code></pre></div><p>(which you can also use, if you wish).</p></div><p>The list should now scroll around with a visible highlight for the current selection.</p><h3 id=launching-games>Launching games</h3><p>The last feature required to make our theme functional is launching games. Game objects from the API have a <code>launch()</code> command you can use. Simply call it on the game list delegate, for example on <span class=keys><kbd class=key-enter>Enter</kbd></span>:</p><div class=codehilite><pre><span></span><code><span class=nx>Component</span> <span class=p>{</span>
    <span class=kd>id: gameViewDelegate</span>

    <span class=nx>Text</span> <span class=p>{</span>
        <span class=c1>// ...</span>

        <span class=k>Keys.onReturnPressed:</span> <span class=nx>modelData</span><span class=p>.</span><span class=nx>launch</span><span class=p>()</span>
    <span class=p>}</span>
<span class=hll><span class=p>}</span>
</span></code></pre></div><div class="admonition help"><p class=admonition-title>Help</p><p>Technically the <span class=keys><kbd class=key-enter>Enter</kbd></span> next to the letter keys is called "Return", and the one on the numeric pad is "Enter". Careful not to mix them up.</p></div><p>And with this, we have a functional theme!</p><h3 id=tweaks>Tweaks</h3><p>Some additional (and optional) graphical tweaks to try out for extra fancyness.</p><h4 id=clipping>Clipping</h4><p>While scrolling, you might have noticed that items at the top and the bottom of the list seem to go out of the bounds of the ListView's area. Delegates are fully drawn on the screen if they are at least partially visible; to make sure nothing shows up outside the ListView's area, you can use the <code>clip</code> property:</p><div class=codehilite><pre><span></span><code><span class=nx>ListView</span> <span class=p>{</span>
    <span class=kd>id: gameView</span>

    <span class=c1>// ...</span>

    <span class=k>focus:</span> <span class=kc>true</span>
<span class=hll>    <span class=k>clip:</span> <span class=kc>true</span>
</span><span class=p>}</span>
</code></pre></div><p>Now the ListView will cut the drawing at its borders.</p><h4 id=centering-the-current-item>Centering the current item</h4><p>It'd be nice if the currently selected item would try to stay in the middle of the list:</p><video autoplay loop style="max-width:100%;display:block;margin:0 auto"><source src=../webm/simple_hlrange.webm type=video/webm></video><p>We can set this by defining the "highlight range"; the ListView will then try to scroll the list so the currently selected item falls into this range.</p><p>The highlight range is defined by the start and end position. For our vertical ListView, these are the distances from the top edge of the item, in pixels. We can get the vertical center of the ListView simply as <code>height / 2</code>, and the height of one Text item was set to 36px previously. To position it exactly in the middle, I'll set the start of the range 18px above the center, and end it 18px below.</p><div class=codehilite><pre><span></span><code><span class=nx>ListView</span> <span class=p>{</span>
    <span class=kd>id: gameView</span>

    <span class=c1>// ...</span>

    <span class=k>highlightRangeMode:</span> <span class=nx>ListView</span><span class=p>.</span><span class=nx>ApplyRange</span>
    <span class=k>preferredHighlightBegin:</span> <span class=nx>height</span> <span class=o>*</span> <span class=mf>0.5</span> <span class=o>-</span> <span class=nx>vpx</span><span class=p>(</span><span class=mi>18</span><span class=p>)</span>
    <span class=k>preferredHighlightEnd:</span> <span class=nx>height</span> <span class=o>*</span> <span class=mf>0.5</span> <span class=o>+</span> <span class=nx>vpx</span><span class=p>(</span><span class=mi>18</span><span class=p>)</span>
<span class=p>}</span>
</code></pre></div><p>which should give the desired result.</p><p>However, when you change the collection, there is a few seconds of scrolling to the index of the newly selected game list. To disable this, and jump to the selected item instantly, set animation duration to zero:</p><div class=codehilite><pre><span></span><code><span class=nx>ListView</span> <span class=p>{</span>
    <span class=kd>id: gameView</span>

    <span class=c1>// ...</span>

    <span class=k>highlightRangeMode:</span> <span class=nx>ListView</span><span class=p>.</span><span class=nx>ApplyRange</span>
<span class=hll>    <span class=k>highlightMoveDuration:</span> <span class=mi>0</span>
</span>    <span class=k>preferredHighlightBegin:</span> <span class=nx>height</span> <span class=o>*</span> <span class=mf>0.5</span> <span class=o>-</span> <span class=nx>vpx</span><span class=p>(</span><span class=mi>18</span><span class=p>)</span>
    <span class=k>preferredHighlightEnd:</span> <span class=nx>height</span> <span class=o>*</span> <span class=mf>0.5</span> <span class=o>+</span> <span class=nx>vpx</span><span class=p>(</span><span class=mi>18</span><span class=p>)</span>
<span class=p>}</span>
</code></pre></div></div></div><footer class="col-md-12 text-center"><hr><p><small>Copyright &copy; 2018-2021 Mátyás Mustoha</small><br><small>Documentation built with <a href=http://www.mkdocs.org/ >MkDocs</a>.</small></p></footer><script src=//ajax.googleapis.com/ajax/libs/jquery/1.12.4/jquery.min.js></script><script src=../../js/bootstrap-3.0.3.min.js></script><script>var base_url = "../.."</script><script src=../../js/base.js></script><script src=../../search/main.js></script><div class=modal id=mkdocs_search_modal tabindex=-1 role=dialog aria-labelledby=searchModalLabel aria-hidden=true><div class="modal-dialog modal-lg"><div class=modal-content><div class=modal-header><button type=button class=close data-dismiss=modal><span aria-hidden=true>&times;</span> <span class=sr-only>Close</span></button><h4 class=modal-title id=searchModalLabel>Search</h4></div><div class=modal-body><p>From here you can search these documents. Enter your search terms below.</p><form><div class=form-group><input class=form-control placeholder=Search... id=mkdocs-search-query title="Type search term here"></div></form><div id=mkdocs-search-results></div></div><div class=modal-footer></div></div></div></div><div class=modal id=mkdocs_keyboard_modal tabindex=-1 role=dialog aria-labelledby=keyboardModalLabel aria-hidden=true><div class=modal-dialog><div class=modal-content><div class=modal-header><h4 class=modal-title id=keyboardModalLabel>Keyboard Shortcuts</h4><button type=button class=close data-dismiss=modal><span aria-hidden=true>&times;</span><span class=sr-only>Close</span></button></div><div class=modal-body><table class=table><thead><tr><th style="width: 20%;">Keys</th><th>Action</th></tr></thead><tbody><tr><td class="help shortcut"><kbd>?</kbd></td><td>Open this help</td></tr><tr><td class="next shortcut"><kbd>n</kbd></td><td>Next page</td></tr><tr><td class="prev shortcut"><kbd>p</kbd></td><td>Previous page</td></tr><tr><td class="search shortcut"><kbd>s</kbd></td><td>Search</td></tr></tbody></table></div><div class=modal-footer></div></div></div></div></body></html>