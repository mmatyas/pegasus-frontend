<!DOCTYPE html><html lang=en><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-60112109-3"></script><script>window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments);}gtag('js',new Date());gtag('config','UA-60112109-3');</script><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="Documentation and customization guides for the Pegasus frontend."><meta name=author content="M치ty치s Mustoha"><link rel=canonical href=http://www.pegasus-frontend.org/docs/themes/api/ ><link rel="shortcut icon" href=../../img/favicon.ico><title>API reference - Pegasus Docs</title><link href=../../css/bootstrap-custom.min.css rel=stylesheet><link href=//maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css rel=stylesheet><link rel=stylesheet href=//cdn.jsdelivr.net/font-hack/2.018/css/hack.min.css><link href="//fonts.googleapis.com/css?family=PT+Sans:400,400italic,700,700italic&subset=latin-ext,latin" rel=stylesheet><link href="//fonts.googleapis.com/css?family=Open+Sans:300italic,400italic,700italic,400,300,600,700&subset=latin-ext,latin" rel=stylesheet><link href="//fonts.googleapis.com/icon?family=Material+Icons" rel=stylesheet><link href=../../css/base.css rel=stylesheet><link href=../../css/cinder.css rel=stylesheet><link rel=stylesheet href=../../css/highlight.css><link href=../../css/extra.css rel=stylesheet><link href=../../css/codehl.css rel=stylesheet><!--[if lt IE 9]>
            <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
            <script src="https://oss.maxcdn.com/libs/respond.js/1.3.0/respond.min.js"></script>
        <![endif]--><script src=https://ajax.googleapis.com/ajax/libs/webfont/1.5.18/webfont.js></script><script>WebFont.load({google: {families: ['Open Sans', 'PT Sans']}});</script></head><body><div class="navbar navbar-default navbar-fixed-top" role=navigation><div class=container><div class=navbar-header><button type=button class=navbar-toggle data-toggle=collapse data-target=.navbar-collapse><span class=sr-only>Toggle navigation</span> <span class=icon-bar></span> <span class=icon-bar></span> <span class=icon-bar></span></button> <a class=navbar-brand href=../..>Pegasus Docs</a></div><div class="navbar-collapse collapse"><ul class="nav navbar-nav"><li><a href=../..>Home</a></li><li class=dropdown><a href=# class=dropdown-toggle data-toggle=dropdown>User Guide <b class=caret></b></a><ul class=dropdown-menu><li><a href=../../user-guide/getting-started/ >Getting started</a></li><li><a href=../../user-guide/controls/ >Default controls</a></li><li class=dropdown-submenu><a tabindex=-1 href="">Platform Notes</a><ul class=dropdown-menu><li><a href=../../user-guide/platform-android/ >Android</a></li><li><a href=../../user-guide/platform-retropie/ >RetroPie</a></li></ul></li><li class=dropdown-submenu><a tabindex=-1 href="">Game files</a><ul class=dropdown-menu><li><a href=../../user-guide/meta-files/ >Collections and metadata files</a></li><li><a href=../../user-guide/meta-assets/ >Asset files</a></li><li><a href=../../user-guide/meta-examples/ >Real world examples</a></li><li><a href=../../user-guide/meta-sources/ >Other data sources</a></li></ul></li><li><a href=../../user-guide/scripting/ >Scripting</a></li><li><a href=../../user-guide/installing-themes/ >Installing themes</a></li><li><a href=../../user-guide/config-dirs/ >Config directories</a></li></ul></li><li class=dropdown><a href=# class=dropdown-toggle data-toggle=dropdown>Core Dev <b class=caret></b></a><ul class=dropdown-menu><li><a href=../../dev/install-qt/ >Installing Qt</a></li><li><a href=../../dev/cross-compile-qt/ >Cross compile Qt</a></li><li><a href=../../dev/build/ >Building</a></li><li><a href=../../dev/deploy/ >Deployment</a></li><li><a href=../../dev/translate/ >Translations</a></li></ul></li><li class="dropdown active"><a href=# class=dropdown-toggle data-toggle=dropdown>Theme Dev <b class=caret></b></a><ul class=dropdown-menu><li><a href=../overview/ >Overview</a></li><li><a href=../qml-tutorials/ >QML tutorials</a></li><li><a href=../qml-modules/ >QML modules</a></li><li><a href=../example-simple/ >Example -- Simple theme</a></li><li><a href=../example-flixnet/ >Example -- Flixnet theme</a></li><li class=active><a href=./ >API reference</a></li></ul></li></ul><ul class="nav navbar-nav navbar-right"><li><a href=# data-toggle=modal data-target=#mkdocs_search_modal><i class="fa fa-search"></i> Search</a></li><li><a rel=next href=../example-flixnet/ ><i class="fa fa-arrow-left"></i> Previous</a></li><li class=disabled><a rel=prev>Next <i class="fa fa-arrow-right"></i></a></li></ul></div></div></div><div class=container><div class=col-md-3><div class="bs-sidebar hidden-print affix well" role=complementary><ul class="nav bs-sidenav"><li class="first-level active"><a href=#api-reference-alpha>API reference (alpha)</a></li><li class=second-level><a href=#collections>Collections</a></li><li class=second-level><a href=#games>Games</a></li><li class=second-level><a href=#assets>Assets</a></li><li class=second-level><a href=#keys>Keys</a></li><li class=second-level><a href=#memory>Memory</a></li><li class=second-level><a href=#theme-utilities>Theme utilities</a></li><li class=third-level><a href=#item-models>Item models</a></li><li class=third-level><a href=#sorting-and-filtering>Sorting and filtering</a></li><li class=third-level><a href=#fonts>Fonts</a></li></ul></div></div><div class=col-md-9 role=main><h1 id=api-reference-alpha>API reference (alpha)</h1><p>All data provided by Pegasus can be accessed using a global QML object called <code>api</code>. It has the following main components:</p><ul><li><code>api.collections</code>: the list of all collections</li><li><code>api.allGames</code>: the list of all games</li><li><code>api.keys</code>: the keyboard/gamepad configuration of the user</li><li><code>api.memory</code>: an object that can store theme specific settings</li></ul><h2 id=collections>Collections</h2><p>Games found by Pegasus are organized in collections, and one game may be present in multiple collections. The collections can be accessed trough <code>api.collections</code>, which is an <a href=#item-models><em>item model</em></a> (in short, a list of items). Each collection in it has the following properties:</p><table><thead><tr><th>Property</th><th>Description</th></tr></thead><tbody><tr><td><code>name</code></td><td>The unique name of the collection, eg. "Nintendo Entertainment System", "Mario Cartridges", etc.</td></tr><tr><td><code>shortName</code></td><td><span class=optional></span> A short name for the collection, often an abbreviation like <code>nes</code>, <code>mame</code>, etc. Always in lowercase. If not set, defaults to the value of <code>name</code>.</td></tr><tr><td><code>games</code></td><td>The list of games belonging to this collection; see "Games" below. All available collections are guaranteed to have at least one game.</td></tr></tbody></table><p>Properties marked as "optional" might have no value (eg. empty string or empty array). All fields are read-only.</p><h2 id=games>Games</h2><p>Games can have metadata and various kinds of assets. The list of games belonging to a collection can be accessed using a collection's <code>games</code> field (see above). The list of <em>all</em> available games can be accessed through <code>api.allGames</code>. Both are <a href=#item-models><em>item models</em></a>. Each game in them has the following properties:</p><table><thead><tr><th>Property</th><th>Description</th></tr></thead><tbody><tr><td><code>title</code></td><td>The game's title</td></tr><tr><td><code>developer</code></td><td><span class=optional></span> Developer(s) as a string. If there are more than one, they are separated with <code>,</code>.</td></tr><tr><td><code>publisher</code></td><td><span class=optional></span> Publisher(s) as a string. If there are more than one, they are separated with <code>,</code>.</td></tr><tr><td><code>genre</code></td><td><span class=optional></span> Genre(s) as a string. If there are more than one, they are separated with <code>,</code>.</td></tr><tr><td><code>developerList</code></td><td><span class=optional></span> The list of developers as an array.</td></tr><tr><td><code>publisherList</code></td><td><span class=optional></span> The list of publishers as an array.</td></tr><tr><td><code>genreList</code></td><td><span class=optional></span> The list of genres as an array.</td></tr><tr><td><code>summary</code></td><td><span class=optional></span> Short description (typically 2-3 sentences).</td></tr><tr><td><code>description</code></td><td><span class=optional></span> Longer description.</td></tr><tr><td><code>release</code></td><td><span class=optional></span> Release date as QML <code>date</code>. If not set, defaults to an invalid date.</td></tr><tr><td><code>year</code></td><td><span class=optional></span> Release year as integer. Defaults to 0.</td></tr><tr><td><code>month</code></td><td><span class=optional></span> Release month as integer. Defaults to 0.</td></tr><tr><td><code>day</code></td><td><span class=optional></span> Release day as integer. Defaults to 0.</td></tr><tr><td><code>players</code></td><td><span class=optional></span> Maximum number of players. If not set, defaults to 1.</td></tr><tr><td><code>rating</code></td><td><span class=optional></span> Floating-point value between and including <code>0.0</code> and <code>1.0</code> (ie. 0% and 100%). If not set, defaults to <code>0.0</code>.</td></tr><tr><td><code>favorite</code></td><td><span class=optional></span> Boolean (true/false) value. If not set, defaults to false. This field is <strong>writable</strong>.</td></tr><tr><td><code>playCount</code></td><td><span class=optional></span> The number of times this games was launched. Defaults to 0.</td></tr><tr><td><code>lastPlayed</code></td><td><span class=optional></span> The last time this game was launched. A QML <code>date</code> value with time information. Defaults to an invalid date.</td></tr><tr><td><code>playTime</code></td><td><span class=optional></span> Play time in seconds, as a positive integer value. Defaults to 0.</td></tr><tr><td><code>assets</code></td><td>An object containing the game's assets (see below).</td></tr></tbody></table><p>Properties marked as "optional" might have no value (eg. empty string or empty array). Unless otherwise noted, all fields are read-only.</p><p>In addition, games have the following callable methods:</p><table><thead><tr><th>Method</th><th>Description</th></tr></thead><tbody><tr><td><code>launch()</code></td><td>Launch this game.</td></tr></tbody></table><p>Launching a game may fail, in which case the reason is logged (and in the future, will be shown to the user). If the game starts up successfully, Pegasus minimizes its resource usage and goes to the background while the game runs. On return, the theme will be reloaded -- if you wish it to remember something, <del>you can use <code>api.memory</code></del> (will be implemented next week).</p><h2 id=assets>Assets</h2><p>Every game has an <code>asset</code> object that contains all assets belonging to the game. It has the following properties. All of them are (local or remote) URLs as string, and all of them can be empty.</p><table><thead><tr><th>Property</th><th>Description</th></tr></thead><tbody><tr><td><code>boxFront</code></td><td>The front of the game box</td></tr><tr><td><code>boxBack</code></td><td>The back of the game box</td></tr><tr><td><code>boxSpine</code></td><td>The spine (side) of the game box</td></tr><tr><td><code>boxFull</code></td><td>Full size box art (front + back + spine)</td></tr><tr><td><code>cartridge</code></td><td>Image of the game medium (cartridge, floppy, disk, etc.)</td></tr><tr><td><code>logo</code></td><td>The game's logo, usually the title art over a transparent background</td></tr></tbody></table><p><img alt="box-related assets" src=../img/assets-box.png></p><table><thead><tr><th>Property</th><th>Description</th></tr></thead><tbody><tr><td><code>marquee</code></td><td>A wide (often over 3:1) artwork on the top of arcade machines</td></tr><tr><td><code>bezel</code></td><td>Decoration around a game's screen on an arcade machine or emulator</td></tr><tr><td><code>panel</code></td><td>Control panel of the arcade machine</td></tr><tr><td><code>cabinetLeft</code></td><td>Left side of the arcade machine</td></tr><tr><td><code>cabinetRight</code></td><td>Right side of the arcade machine</td></tr></tbody></table><p><img alt="box-related assets" src=../img/assets-arcade.png></p><table><thead><tr><th>Property</th><th>Description</th></tr></thead><tbody><tr><td><code>tile</code></td><td>A square-sized image (<em>not</em> the desktop icon)</td></tr><tr><td><code>banner</code></td><td>An image in 16:9 aspect ratio</td></tr><tr><td><code>steam</code></td><td>Steam grid icon, 460:215 ratio (most often 460x215, some people use 920x430)</td></tr><tr><td><code>poster</code></td><td>Advertisement poster, usually with 2:3 aspect ratio (in general a portrait-aligned image)</td></tr><tr><td><code>background</code></td><td>A background image, eg. artwork or selected screenshot</td></tr><tr><td><code>music</code></td><td>Background music</td></tr></tbody></table><p><img alt="box-related assets" src=../img/assets-ui.png></p><p>In addition, the following members can have multiple values, and as such usable as eg. <code>model</code> sources. All of them can be empty.</p><table><thead><tr><th>Property</th><th>Description</th></tr></thead><tbody><tr><td><code>screenshots</code></td><td>Array of strings, each a URL to an image.</td></tr><tr><td><code>videos</code></td><td>Array of strings, each a URL to a video source.</td></tr></tbody></table><h2 id=keys>Keys</h2><p>Controls configuration can be queried using the <code>api.keys</code> object, with the functions and members below. For each UI functionality (eg. "accept"), you can check whether a particular key/button is registered to that event, or get all of the registered keys as an array.</p><table><thead><tr><th>Purpose</th><th>Check function</th><th>Array</th></tr></thead><tbody><tr><td>accept/select</td><td><code>isAccept(keyevent)</code></td><td><code>accept</code></td></tr><tr><td>cancel/back</td><td><code>isCancel(keyevent)</code></td><td><code>cancel</code></td></tr><tr><td>details</td><td><code>isDetails(keyevent)</code></td><td><code>details</code></td></tr><tr><td>filters</td><td><code>isFilters(keyevent)</code></td><td><code>filters</code></td></tr><tr><td>next page</td><td><code>isNextPage(keyevent)</code></td><td><code>nextPage</code></td></tr><tr><td>previous page</td><td><code>isPrevPage(keyevent)</code></td><td><code>prevPage</code></td></tr><tr><td>page up</td><td><code>isPageUp(keyevent)</code></td><td><code>pageUp</code></td></tr><tr><td>page down</td><td><code>isPageDown(keyevent)</code></td><td><code>pageDown</code></td></tr></tbody></table><p>In themes, you typically handle keyboard and gamepad key presses/releases using <code>Keys.onPressed</code> and <code>Keys.onReleased</code> (see the <a href=https://doc.qt.io/qt-5/qml-qtquick-keys.html#pressed-signal>Qt documentation</a>). The <code>event</code> object you receive there can be used as the parameter for the functions above. As for the key list querying, the returned array contains simple objects that have <code>key</code> and <code>modifiers</code> fields, like the real QML <code>KeyEvent</code> object (but nothing else).</p><p>Example:</p><div class=codehilite><pre><span></span><span class=k>Keys.onPressed:</span> <span class=p>{</span>
    <span class=k>if</span> <span class=p>(</span><span class=nx>api</span><span class=p>.</span><span class=nx>keys</span><span class=p>.</span><span class=nx>isAccept</span><span class=p>(</span><span class=nx>event</span><span class=p>))</span> <span class=p>{</span>
        <span class=nx>event</span><span class=p>.</span><span class=nx>accepted</span> <span class=o>=</span> <span class=kc>true</span><span class=p>;</span>

        <span class=c1>// do something</span>
    <span class=p>}</span>
<span class=p>}</span>
</pre></div><div class="admonition warning"><p class=admonition-title>Warning</p><p>For regular navigation (ie. up/down/left/right), the QML <code>KeyNavigation</code> can be used (documentation <a href=https://doc.qt.io/qt-5/qml-qtquick-keynavigation.html>here</a>). Navigation keys (arrows/dpad/left stick) cannot be changed at the moment.</p></div><h2 id=memory>Memory</h2><p>Themes often want to remember data like custom options or the index of the last launched game or collection. To store the settings belonging to your theme, you can use <code>api.memory</code>. This is an object that contains key-value pairs (like a Map), and can be modified using the following methods:</p><table><thead><tr><th>Method</th><th>Description</th></tr></thead><tbody><tr><td><code>set(key, value)</code></td><td>Sets the value belonging to <code>key</code>. If <code>key</code> already exists, its value will be overwritten.</td></tr><tr><td><code>get(key)</code></td><td>Returns the value belonging to <code>key</code>, if there is any, otherwise returns <code>undefined</code>.</td></tr><tr><td><code>has(key)</code></td><td>Returns true if <code>key</code> is set (has value), otherwise returns false.</td></tr><tr><td><code>unset(key)</code></td><td>Removes <code>key</code> and its value.</td></tr></tbody></table><p><code>key</code> must be a string in all methods above, while <code>value</code> can be any JSON-compatible JavaScript type.</p><p>Good places to use <code>api.memory</code> for example is when your theme loads (<code>Component.onCompleted</code>), unloads (<code>Component.onDestruction</code>) or the user starts a game. For example:</p><div class=codehilite><pre><span></span><span class=nx>ListView</span> <span class=p>{</span>
    <span class=kd>id: mygamelist</span>

    <span class=k>model:</span> <span class=nx>api</span><span class=p>.</span><span class=nx>allGames</span>
    <span class=k>delegate:</span> <span class=nx>Rectangle</span> <span class=p>{</span>
        <span class=nx>MouseArea</span> <span class=p>{</span>
            <span class=k>anchors.fill:</span> <span class=nx>parent</span>
            <span class=k>onClicked:</span> <span class=nx>launchGame</span><span class=p>(</span><span class=nx>modelData</span><span class=p>)</span>
        <span class=p>}</span>
    <span class=p>}</span>
<span class=p>}</span>


<span class=k>Component.onCompleted:</span> <span class=p>{</span>
    <span class=nx>mygamelist</span><span class=p>.</span><span class=nx>currentIndex</span> <span class=o>=</span> <span class=nx>api</span><span class=p>.</span><span class=nx>memory</span><span class=p>.</span><span class=nx>get</span><span class=p>(</span><span class=s1>&#39;gameIndex&#39;</span><span class=p>)</span> <span class=o>||</span> <span class=mi>0</span><span class=p>;</span>
<span class=p>}</span>

<span class=kd>function</span> <span class=nx>launchGame</span><span class=p>(</span><span class=nx>game</span><span class=p>)</span> <span class=p>{</span>
    <span class=nx>api</span><span class=p>.</span><span class=nx>memory</span><span class=p>.</span><span class=nx>set</span><span class=p>(</span><span class=s1>&#39;gameIndex&#39;</span><span class=p>,</span> <span class=nx>mygamelist</span><span class=p>.</span><span class=nx>currentIndex</span><span class=p>);</span>
    <span class=nx>game</span><span class=p>.</span><span class=nx>launch</span><span class=p>();</span>
<span class=p>}</span>
</pre></div><h2 id=theme-utilities>Theme utilities</h2><h3 id=item-models>Item models</h3><p><em>Item models</em> are list of objects that support custom sorting and filtering, and can be used as the <code>model</code> property of QML Views (eg. ListView or PathView). See <a href=https://doc.qt.io/qt-5/qtquick-modelviewsdata-modelview.html#displaying-data-with-views>the Qt documentation</a> for more details. For convenience, the <code>modelData</code> role is also provided for all item models mentioned in this documentation.</p><p>Sometimes you may want to access the items of an item model manually. To query the <strong>number of items</strong> in the model, you can check its <code>count</code> property (eg. <code>api.allGames.count</code>), while to <strong>get a single item</strong> of it, you can use the <code>get(index)</code> method (eg. <code>api.allGames.get(5)</code>).</p><h3 id=sorting-and-filtering>Sorting and filtering</h3><p><em>Item models</em> can be sorted and filtered using <a href=https://github.com/oKcerG/SortFilterProxyModel>SortFilterProxyModel</a>. Please see the samples in the linked documentation for usage tips. The list of all available sorters and filters can be found <a href=https://okcerg.github.io/SortFilterProxyModel/ >here</a>.</p><p>For example, to get the list of all games ordered by play time, you could write a code similar to this:</p><div class=codehilite><pre><span></span><span class=kr>import</span> <span class=nx>SortFilterProxyModel</span> <span class=mf>0.2</span>

<span class=p>...</span>

<span class=nx>SortFilterProxyModel</span> <span class=p>{</span>
    <span class=kd>id: mysorter</span>
    <span class=k>sourceModel:</span> <span class=nx>api</span><span class=p>.</span><span class=nx>allGames</span>
    <span class=k>sorters:</span> <span class=nx>RoleSorter</span> <span class=p>{</span> <span class=k>roleName:</span> <span class=s2>&quot;playTime&quot;</span> <span class=p>}</span>
<span class=p>}</span>

<span class=nx>ListView</span> <span class=p>{</span>
    <span class=k>model:</span> <span class=nx>mysorter</span>
    <span class=p>...</span>
<span class=p>}</span>
</pre></div><h3 id=fonts>Fonts</h3><p>Pegasus comes with a sans-serif and a sans-serif condensed font face, which are used in the main menu. If you want to use the same font families in your theme, you can access them using a global QML object called <code>globalFonts</code>. This has the following properties:</p><table><thead><tr><th>Property</th><th>Description</th></tr></thead><tbody><tr><td><code>sans</code></td><td>The sans-serif font</td></tr><tr><td><code>condensed</code></td><td>The sans-serif condensed font</td></tr></tbody></table><p>You can use them as the value for <code>font.family</code> members of Text items, eg. <code>font.family: globalFonts.sans</code>.</p><p>The fonts currently in use are Roboto and Roboto Condensed.</p></div></div><footer class="col-md-12 text-center"><hr><p><small>Copyright &copy; 2018 M치ty치s Mustoha<br></small><small>Documentation built with <a href=http://www.mkdocs.org/ >MkDocs</a>.</small></p></footer><script src=../../js/jquery-1.10.2.min.js></script><script src=../../js/bootstrap-3.0.3.min.js></script><script src=../../js/highlight.pack.js></script><script>hljs.initHighlightingOnLoad();</script><script>var base_url = '../..';</script><script data-main=../../mkdocs/js/search.js src=../../mkdocs/js/require.js></script><script src=../../js/base.js></script><script src=../../search/main.js></script><div class=modal id=mkdocs_search_modal tabindex=-1 role=dialog aria-labelledby="Search Modal" aria-hidden=true><div class=modal-dialog><div class=modal-content><div class=modal-header><button type=button class=close data-dismiss=modal><span aria-hidden=true>&times;</span> <span class=sr-only>Close</span></button><h4 class=modal-title id=exampleModalLabel>Search</h4></div><div class=modal-body><p>From here you can search these documents. Enter your search terms below.</p><form role=form><div class=form-group><input class=form-control placeholder=Search... id=mkdocs-search-query></div></form><div id=mkdocs-search-results></div></div><div class=modal-footer></div></div></div></div></body></html>