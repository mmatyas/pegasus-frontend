"use strict";function e(){const e=document.getElementById("slideshow").firstElementChild;let t=e.firstElementChild,n=null;function l(){e.style.transform=`translateX(-${t.offsetLeft}px)`}function s(){t=t.nextElementSibling?t.nextElementSibling:t.parentElement.firstElementChild,l()}function a(){window.clearInterval(n),n=window.setInterval(s,6e3)}document.getElementById("prev-screenshot").addEventListener("click",()=>{t=t.previousElementSibling?t.previousElementSibling:t.parentElement.lastElementChild,l(),a()}),document.getElementById("next-screenshot").addEventListener("click",()=>{s(),a()}),a()}async function t(e,t,n,l){function s(e,t,n,l){document.getElementById("dl-"+e).innerHTML=`<a href='${l}'>${t} <span class='date'>(${n})</span></a>`}try{const l=new AbortController,a={signal:l.signal},o=(setTimeout(()=>l.abort(),5e3),await fetch("https://api.github.com/repos/mmatyas/pegasus-frontend/releases/"+n,a));if(!o.ok)throw o.status;!function(n){if(!("assets"in n)||!Array.isArray(n.assets))return;const l="-static";n.assets.forEach((n,a)=>{if(!("name"in n)||!("browser_download_url"in n)||!("updated_at"in n))return;const o=n.updated_at.substr(0,10);let d=/^pegasus-fe_([a-z0-9-]+)_([a-z0-9-]+)/.exec(n.name);if(d&&d.length>2){let a=d[2];if(a.endsWith(l)&&(a=a.slice(0,-l.length)),e.includes(a))return void s(a+t,d[1],o,n.browser_download_url)}d=/^pegasus-frontend_([0-9\.]+)_[a-z0-9]+\.deb$/.exec(n.name),d&&d.length>1&&s("x11deb"+t,d[1],o,n.browser_download_url)})}(await o.json())}catch{e.forEach(e=>{const n=document.getElementById("dl-"+e+t);"loading..."==n.innerHTML&&(n.innerHTML="Failed to query the server. See all releases <a href='https://github.com/mmatyas/pegasus-frontend/releases/"+l+"'>HERE</a>.")})}}window.onload=async function(){e(),document.querySelectorAll(".dl-select").forEach(e=>{e.addEventListener("click",()=>{document.querySelectorAll(".dl-select").forEach(e=>e.classList.remove("selected")),document.querySelectorAll(".dl-block").forEach(e=>e.classList.add("hidden")),e.classList.add("selected"),document.querySelector(`.dl-block[data-platform=${e.dataset.platform}]`).classList.remove("hidden")})}),function(){document.querySelectorAll(".dl-block").forEach(e=>e.classList.add("hidden"));const e=[{ua:"Android",ui:"android"},{ua:"Win",ui:"windows"},{ua:"X11",ui:"linux"},{ua:"Mac",ui:"macos"}];for(let t of e)if(navigator.userAgent.includes(t.ua))return document.querySelector(`.dl-block[data-platform=${t.ui}]`).classList.remove("hidden"),void document.querySelector(`.dl-select[data-platform=${t.ui}]`).classList.add("selected");document.querySelectorAll(".dl-block").firstElementChild.classList.remove("hidden"),document.querySelectorAll(".dl-select").firstElementChild.classList.add("selected")}(),await function(){const e=["win-mingw","x11","rpi1","rpi2","rpi3","rpi4","android","macos","odroid-c1","odroid-c2","odroid-xu3"];t(e,"-stable","latest","latest"),t(e,"-dev","tags/continuous","tag/continuous")}()};